<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹ | ğŸ‘¨ğŸ½â€ğŸ’»å‰ç«¯æ¼«æ¸¸æŒ‡å—</title>
    <meta name="description" content="Never Stop Learning">
    <link rel="icon" href="/bookNotes/favicon.ico">
    
    <link rel="preload" href="/bookNotes/assets/css/0.styles.02a9e5b3.css" as="style"><link rel="preload" href="/bookNotes/assets/js/app.a5c1f5ee.js" as="script"><link rel="preload" href="/bookNotes/assets/js/87.8a9e4f11.js" as="script"><link rel="prefetch" href="/bookNotes/assets/js/10.7897844d.js"><link rel="prefetch" href="/bookNotes/assets/js/11.daa46aa2.js"><link rel="prefetch" href="/bookNotes/assets/js/12.19efc583.js"><link rel="prefetch" href="/bookNotes/assets/js/13.5b7f839d.js"><link rel="prefetch" href="/bookNotes/assets/js/14.47b4842d.js"><link rel="prefetch" href="/bookNotes/assets/js/15.959aa0c7.js"><link rel="prefetch" href="/bookNotes/assets/js/16.e07efd9a.js"><link rel="prefetch" href="/bookNotes/assets/js/17.06df2fb1.js"><link rel="prefetch" href="/bookNotes/assets/js/18.40dee455.js"><link rel="prefetch" href="/bookNotes/assets/js/19.ea09a6c5.js"><link rel="prefetch" href="/bookNotes/assets/js/2.2daf200c.js"><link rel="prefetch" href="/bookNotes/assets/js/20.ffb27053.js"><link rel="prefetch" href="/bookNotes/assets/js/21.33f73e1d.js"><link rel="prefetch" href="/bookNotes/assets/js/22.9e99b0e5.js"><link rel="prefetch" href="/bookNotes/assets/js/23.5417826f.js"><link rel="prefetch" href="/bookNotes/assets/js/24.59000dfc.js"><link rel="prefetch" href="/bookNotes/assets/js/25.acc91333.js"><link rel="prefetch" href="/bookNotes/assets/js/26.6af21f36.js"><link rel="prefetch" href="/bookNotes/assets/js/27.3d2e96f4.js"><link rel="prefetch" href="/bookNotes/assets/js/28.262d38c6.js"><link rel="prefetch" href="/bookNotes/assets/js/29.1eca77c6.js"><link rel="prefetch" href="/bookNotes/assets/js/3.2e998a1c.js"><link rel="prefetch" href="/bookNotes/assets/js/30.af641b29.js"><link rel="prefetch" href="/bookNotes/assets/js/31.3c9c863c.js"><link rel="prefetch" href="/bookNotes/assets/js/32.07ea838c.js"><link rel="prefetch" href="/bookNotes/assets/js/33.acab53c4.js"><link rel="prefetch" href="/bookNotes/assets/js/34.48dd7240.js"><link rel="prefetch" href="/bookNotes/assets/js/35.7c3ec624.js"><link rel="prefetch" href="/bookNotes/assets/js/36.ccd745ec.js"><link rel="prefetch" href="/bookNotes/assets/js/37.005d8f1b.js"><link rel="prefetch" href="/bookNotes/assets/js/38.fc6a5f21.js"><link rel="prefetch" href="/bookNotes/assets/js/39.44489367.js"><link rel="prefetch" href="/bookNotes/assets/js/4.dd5fac1d.js"><link rel="prefetch" href="/bookNotes/assets/js/40.34c225a3.js"><link rel="prefetch" href="/bookNotes/assets/js/41.1e7d641f.js"><link rel="prefetch" href="/bookNotes/assets/js/42.236029dd.js"><link rel="prefetch" href="/bookNotes/assets/js/43.09a1cad0.js"><link rel="prefetch" href="/bookNotes/assets/js/44.8165a802.js"><link rel="prefetch" href="/bookNotes/assets/js/45.01f5f11f.js"><link rel="prefetch" href="/bookNotes/assets/js/46.46b782a7.js"><link rel="prefetch" href="/bookNotes/assets/js/47.1ec61019.js"><link rel="prefetch" href="/bookNotes/assets/js/48.625d747e.js"><link rel="prefetch" href="/bookNotes/assets/js/49.f97abe71.js"><link rel="prefetch" href="/bookNotes/assets/js/5.dd4a8225.js"><link rel="prefetch" href="/bookNotes/assets/js/50.68dee525.js"><link rel="prefetch" href="/bookNotes/assets/js/51.583184a8.js"><link rel="prefetch" href="/bookNotes/assets/js/52.c7af0993.js"><link rel="prefetch" href="/bookNotes/assets/js/53.b647ed86.js"><link rel="prefetch" href="/bookNotes/assets/js/54.a5fbaa3d.js"><link rel="prefetch" href="/bookNotes/assets/js/55.a7b560d2.js"><link rel="prefetch" href="/bookNotes/assets/js/56.33015b4d.js"><link rel="prefetch" href="/bookNotes/assets/js/57.80ffe644.js"><link rel="prefetch" href="/bookNotes/assets/js/58.11a6edd1.js"><link rel="prefetch" href="/bookNotes/assets/js/59.e8bead8f.js"><link rel="prefetch" href="/bookNotes/assets/js/6.4505f2dd.js"><link rel="prefetch" href="/bookNotes/assets/js/60.cda1b788.js"><link rel="prefetch" href="/bookNotes/assets/js/61.16b57984.js"><link rel="prefetch" href="/bookNotes/assets/js/62.0476eb6a.js"><link rel="prefetch" href="/bookNotes/assets/js/63.f31d1faa.js"><link rel="prefetch" href="/bookNotes/assets/js/64.2e35d3be.js"><link rel="prefetch" href="/bookNotes/assets/js/65.e4ba2ad2.js"><link rel="prefetch" href="/bookNotes/assets/js/66.c2f247d4.js"><link rel="prefetch" href="/bookNotes/assets/js/67.393df1f2.js"><link rel="prefetch" href="/bookNotes/assets/js/68.875cabd4.js"><link rel="prefetch" href="/bookNotes/assets/js/69.54e25a4e.js"><link rel="prefetch" href="/bookNotes/assets/js/7.670f9f76.js"><link rel="prefetch" href="/bookNotes/assets/js/70.17e6d438.js"><link rel="prefetch" href="/bookNotes/assets/js/71.95131df7.js"><link rel="prefetch" href="/bookNotes/assets/js/72.83e3f4f8.js"><link rel="prefetch" href="/bookNotes/assets/js/73.2a333618.js"><link rel="prefetch" href="/bookNotes/assets/js/74.13fba1a5.js"><link rel="prefetch" href="/bookNotes/assets/js/75.8ea1e0ca.js"><link rel="prefetch" href="/bookNotes/assets/js/76.1bd9ac71.js"><link rel="prefetch" href="/bookNotes/assets/js/77.470d01e4.js"><link rel="prefetch" href="/bookNotes/assets/js/78.29be0910.js"><link rel="prefetch" href="/bookNotes/assets/js/79.0da8502d.js"><link rel="prefetch" href="/bookNotes/assets/js/8.3c63f96d.js"><link rel="prefetch" href="/bookNotes/assets/js/80.f840286c.js"><link rel="prefetch" href="/bookNotes/assets/js/81.8dc38613.js"><link rel="prefetch" href="/bookNotes/assets/js/82.63f9f794.js"><link rel="prefetch" href="/bookNotes/assets/js/83.92125d6e.js"><link rel="prefetch" href="/bookNotes/assets/js/84.2dd13e00.js"><link rel="prefetch" href="/bookNotes/assets/js/85.90ac8d90.js"><link rel="prefetch" href="/bookNotes/assets/js/86.00a9730f.js"><link rel="prefetch" href="/bookNotes/assets/js/88.4b63d7ed.js"><link rel="prefetch" href="/bookNotes/assets/js/89.8cbf23b4.js"><link rel="prefetch" href="/bookNotes/assets/js/9.2033ddc1.js"><link rel="prefetch" href="/bookNotes/assets/js/90.871ef198.js"><link rel="prefetch" href="/bookNotes/assets/js/91.f87deae7.js"><link rel="prefetch" href="/bookNotes/assets/js/92.3eb8316d.js"><link rel="prefetch" href="/bookNotes/assets/js/93.ccc52aee.js"><link rel="prefetch" href="/bookNotes/assets/js/94.17ce85a1.js"><link rel="prefetch" href="/bookNotes/assets/js/95.490c860d.js"><link rel="prefetch" href="/bookNotes/assets/js/96.ed694272.js"><link rel="prefetch" href="/bookNotes/assets/js/97.e9cae244.js">
    <link rel="stylesheet" href="/bookNotes/assets/css/0.styles.02a9e5b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bookNotes/" class="home-link router-link-active"><!----> <span class="site-name">ğŸ‘¨ğŸ½â€ğŸ’»å‰ç«¯æ¼«æ¸¸æŒ‡å—</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bookNotes/macosguide/" class="nav-link">MacOSé…ç½®</a></div><div class="nav-item"><a href="/bookNotes/weekstudy/" class="nav-link router-link-active">å‘¨å­¦ç³»åˆ—</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">å­¦ä¹ ç³»åˆ—</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bookNotes/cssmagic/" class="nav-link">CSSæ­ç§˜</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/algorithm/" class="nav-link">å‰ç«¯æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/interview/" class="nav-link">é¢è¯•çŸ¥å¤šå°‘</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/reactstatus/" class="nav-link">ReactçŠ¶æ€ç®¡ç†ä¸åŒæ„å®æˆ˜</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/koa2/" class="nav-link">Koa2ç³»åˆ—</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/nodejs/" class="nav-link">Nodejsç³»åˆ—</a></li></ul></div></div><div class="nav-item"><a href="http://h5web.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubåœ°å€
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo/react" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç®—æ³•ä»“åº“
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bookNotes/macosguide/" class="nav-link">MacOSé…ç½®</a></div><div class="nav-item"><a href="/bookNotes/weekstudy/" class="nav-link router-link-active">å‘¨å­¦ç³»åˆ—</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">å­¦ä¹ ç³»åˆ—</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bookNotes/cssmagic/" class="nav-link">CSSæ­ç§˜</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/algorithm/" class="nav-link">å‰ç«¯æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/interview/" class="nav-link">é¢è¯•çŸ¥å¤šå°‘</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/reactstatus/" class="nav-link">ReactçŠ¶æ€ç®¡ç†ä¸åŒæ„å®æˆ˜</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/koa2/" class="nav-link">Koa2ç³»åˆ—</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/nodejs/" class="nav-link">Nodejsç³»åˆ—</a></li></ul></div></div><div class="nav-item"><a href="http://h5web.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubåœ°å€
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo/react" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç®—æ³•ä»“åº“
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/bookNotes/weekstudy/" class="sidebar-link">ç”¨å¥½è°·æ­Œ!!!(é‡ç‚¹)</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´38å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´39å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´40å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´41å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´42å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´43å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´44å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´45å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>2019å¹´46å‘¨</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/bookNotes/weekstudy/Stateè®¾è®¡Reduxå¼€å‘ç¬¬ä¸€æ­¥.html" class="sidebar-link">State è®¾è®¡ Redux å¼€å‘ç¬¬ä¸€æ­¥</a></li><li><a href="/bookNotes/weekstudy/å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹.html" class="active sidebar-link">å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹.html#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´47å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´48å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´49å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´51å‘¨</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019å¹´52å‘¨</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹"><a href="#å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹" aria-hidden="true" class="header-anchor">#</a> å­¦ä¹ reactè¿·æƒ‘çš„ç‚¹</h1> <p>åŸæ–‡åœ°å€ https://mp.weixin.qq.com/s/GR_J26IkO-o2Ki8DunMJNg</p> <blockquote><p>æ–°æ‰‹å­¦ä¹  React çš„æ—¶å€™å®¹æ˜“è¿·æƒ‘çš„ç‚¹å†™å‡ºæ¥</p></blockquote> <h3 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥-react"><a href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥-react" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦å¼•å…¥ React</h3> <p>åœ¨å†™ React çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šå†™ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...other code</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>å‰ç«¯æ¡ƒå›­<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½ è‚¯å®šç–‘æƒ‘è¿‡ï¼Œä¸‹é¢çš„ä»£ç éƒ½æ²¡æœ‰ç”¨åˆ° Reactï¼Œä¸ºä»€ä¹ˆè¦å¼•å…¥ React å‘¢ï¼Ÿ</p> <p>å¦‚æœä½ æŠŠ <strong>import React from â€˜reactâ€™</strong> åˆ æ‰ï¼Œè¿˜ä¼šæŠ¥ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼š
<img src="http://book.52react.cn/20191119224155.png" alt></p> <p>é‚£ä¹ˆç©¶ç«Ÿæ˜¯å“ªé‡Œç”¨åˆ°äº†è¿™ä¸ª Reactï¼Œå¯¼è‡´æˆ‘ä»¬å¼•å…¥ React ä¼šæŠ¥é”™å‘¢ï¼Œä¸æ‡‚è¿™ä¸ªåŸå› ï¼Œé‚£ä¹ˆå°±æ˜¯ JSX æ²¡æœ‰æå¾—å¤ªæ˜ç™½ã€‚</p> <p>ä½ å¯ä»¥è®²ä¸Šé¢çš„ä»£ç (å¿½ç•¥å¯¼å…¥è¯­å¥)æ”¾åˆ°åœ¨çº¿ babel é‡Œè¿›è¡Œè½¬åŒ–ä¸€ä¸‹ï¼Œå‘ç° babel ä¼šæŠŠä¸Šé¢çš„ä»£ç è½¬åŒ–æˆ:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...other code</span>
  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;å‰ç«¯æ¡ƒå›­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å› ä¸ºä»æœ¬è´¨ä¸Šè®²ï¼ŒJSX åªæ˜¯ä¸º <strong>React.createElement(component, props, ...children)</strong> å‡½æ•°æä¾›çš„è¯­æ³•ç³–ã€‚</p> <h3 id="ä¸ºä»€ä¹ˆè¦ç”¨-classname-è€Œä¸ç”¨-class"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-classname-è€Œä¸ç”¨-class" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ç”¨ className è€Œä¸ç”¨ class</h3> <p>React ä¸€å¼€å§‹çš„ç†å¿µæ˜¯æƒ³ä¸æµè§ˆå™¨çš„ DOM API ä¿æŒä¸€è‡´è€Œä¸æ˜¯ HTMLï¼Œå› ä¸º JSX æ˜¯ JS çš„æ‰©å±•ï¼Œè€Œä¸æ˜¯ç”¨æ¥ä»£æ›¿ HTML çš„ï¼Œè¿™æ ·ä¼šå’Œå…ƒç´ çš„åˆ›å»ºæ›´ä¸ºæ¥è¿‘ã€‚åœ¨å…ƒç´ ä¸Šè®¾ç½® <code>class</code> éœ€è¦ä½¿ç”¨ <code>className</code> è¿™ä¸ª APIï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span> 
</code></pre></div><p>æµè§ˆå™¨é—®é¢˜ï¼ŒES5 ä¹‹å‰ï¼Œåœ¨å¯¹è±¡ä¸­ä¸èƒ½ä½¿ç”¨ä¿ç•™å­—ã€‚ä»¥ä¸‹ä»£ç åœ¨ IE8 ä¸­å°†ä¼šæŠ›å‡ºé”™è¯¯ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
 attributes<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&quot;hello&quot;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>è§£æ„é—®é¢˜ï¼Œå½“ä½ åœ¨è§£æ„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœåˆ†é…ä¸€ä¸ª class å˜é‡ä¼šå‡ºé—®é¢˜</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">class</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span> <span class="token comment">// Uncaught SyntaxError: Unexpected token }</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> className <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> className<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span> 
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">class</span><span class="token punctuation">:</span> className <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span> 
</code></pre></div><p>å…¶ä»–è®¨è®ºå¯è§ï¼šæœ‰è¶£çš„è¯é¢˜ï¼Œä¸ºä»€ä¹ˆjsxç”¨classNameè€Œä¸æ˜¯class</p> <h3 id="ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°"><a href="#ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆå±æ€§è¦ç”¨å°é©¼å³°</h3> <p>å› ä¸º JSX è¯­æ³•ä¸Šæ›´æ¥è¿‘ JavaScript è€Œä¸æ˜¯ HTMLï¼Œæ‰€ä»¥ React DOM ä½¿ç”¨ camelCaseï¼ˆå°é©¼å³°å‘½åï¼‰æ¥å®šä¹‰å±æ€§çš„åç§°ï¼Œè€Œä¸ä½¿ç”¨ HTML å±æ€§åç§°çš„å‘½åçº¦å®šã€‚</p> <h3 id="ä¸ºä»€ä¹ˆ-constructor-é‡Œè¦è°ƒç”¨-super-å’Œä¼ é€’-props"><a href="#ä¸ºä»€ä¹ˆ-constructor-é‡Œè¦è°ƒç”¨-super-å’Œä¼ é€’-props" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆ constructor é‡Œè¦è°ƒç”¨ super å’Œä¼ é€’ props</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>It is <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è€Œä¸”æœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼Œä¸ä»…è®©æˆ‘ä»¬è°ƒç”¨ super è¿˜è¦æŠŠ props ä¼ é€’è¿›å»ï¼Œä½†æ˜¯æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšã€‚</p> <p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰ç–‘æƒ‘è¿‡ä¸ºä»€ä¹ˆè¦è°ƒç”¨ super å’Œä¼ é€’ propsï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è§£å¼€è°œé¢˜å§ã€‚</p> <p>â­ ä¸ºä»€ä¹ˆè¦è°ƒç”¨ super</p> <p>å…¶å®è¿™ä¸æ˜¯ React çš„é™åˆ¶ï¼Œè¿™æ˜¯ JavaScript çš„é™åˆ¶ï¼Œåœ¨<code>æ„é€ å‡½æ•°</code>é‡Œå¦‚æœè¦è°ƒç”¨ <code>this</code>ï¼Œé‚£ä¹ˆ<code>æå‰</code>å°±è¦è°ƒç”¨ superï¼Œåœ¨ React é‡Œï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šåœ¨æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ– stateï¼Œthis.state = xxx ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨ superã€‚</p> <p>â­ ä¸ºä»€ä¹ˆè¦ä¼ é€’ props</p> <p>ä½ å¯èƒ½ä»¥ä¸ºå¿…é¡»ç»™ <code>super</code> ä¼ å…¥ <code>props</code>ï¼Œå¦åˆ™ React.Component å°±æ²¡æ³•åˆå§‹åŒ– this.propsï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸è¿‡ï¼Œå¦‚æœä½ ä¸å°å¿ƒæ¼ä¼ äº† propsï¼Œç›´æ¥è°ƒç”¨äº† <code>super()</code>ï¼Œä½ ä»ç„¶å¯ä»¥åœ¨ render å’Œå…¶ä»–æ–¹æ³•ä¸­è®¿é—® <code>this.props</code>ï¼ˆä¸ä¿¡çš„è¯å¯ä»¥è¯•è¯•å˜›ï¼‰ã€‚</p> <p>ä¸ºå•¥è¿™æ ·ä¹Ÿè¡Œï¼Ÿå› ä¸ºReact ä¼šåœ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨ä¹‹åï¼Œä¼šæŠŠ props èµ‹å€¼ç»™åˆšåˆšåˆ›å»ºçš„å®ä¾‹å¯¹è±¡ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourComponent</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
</code></pre></div><p>props ä¸ä¼ ä¹Ÿèƒ½ç”¨ï¼Œæ˜¯æœ‰åŸå› çš„ã€‚</p> <p>ä½†è¿™æ„å‘³ç€ä½ åœ¨ä½¿ç”¨ React æ—¶ï¼Œå¯ä»¥ç”¨ super() ä»£æ›¿ super(props) äº†ä¹ˆï¼Ÿ</p> <p>é‚£è¿˜æ˜¯ä¸è¡Œçš„ï¼Œä¸ç„¶å®˜ç½‘ä¹Ÿä¸ä¼šå»ºè®®ä½ è°ƒç”¨ props äº†ï¼Œè™½ç„¶ React ä¼šåœ¨æ„é€ å‡½æ•°è¿è¡Œä¹‹åï¼Œä¸º this.props èµ‹å€¼ï¼Œä½†åœ¨ super() è°ƒç”¨ä¹‹åä¸æ„é€ å‡½æ•°ç»“æŸä¹‹å‰ï¼Œ this.props ä»ç„¶æ˜¯æ²¡æ³•ç”¨çš„ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Inside React</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Inside your code</span>
<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜¬ å¿˜äº†ä¼ å…¥ props</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… {}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜¬ undefined</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¦æ˜¯æ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†æŸä¸ªè®¿é—® props çš„æ–¹æ³•ï¼Œé‚£è¿™ä¸ª bug å°±æ›´éš¾å®šä½äº†ã€‚<strong>å› æ­¤æˆ‘å¼ºçƒˆå»ºè®®å§‹ç»ˆä½¿ç”¨super(props)ï¼Œå³ä½¿è¿™ä¸æ˜¯å¿…é¡»çš„</strong>ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… We passed props</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… {}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… {}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢çš„ä»£ç ç¡®ä¿ this.props å§‹ç»ˆæ˜¯æœ‰å€¼çš„ã€‚</p> <p>å¦‚æœä½ æƒ³é¿å…ä»¥ä¸Šçš„é—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡class å±æ€§ææ¡ˆ æ¥ç®€åŒ–ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//ç®€å†™</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>It is <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´"><a href="#ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å¤§å†™å¼€å¤´</h3> <p>å‰é¢ä»¥åŠè¯´è¿‡äº†ï¼ŒJSX æ˜¯ React.createElement(component, props, â€¦children) æä¾›çš„è¯­æ³•ç³–ï¼Œcomponent çš„ç±»å‹æ˜¯ï¼šstring/ReactClass typeï¼Œæˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ° string ç±»å‹ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨åˆ° ReactClass type ç±»å‹</p> <ul><li><p>string ç±»å‹reactä¼šè§‰å¾—ä»–æ˜¯ä¸€ä¸ªåŸç”ŸdomèŠ‚ç‚¹</p></li> <li><p>ReactClass type ç±»å‹ è‡ªå®šä¹‰ç»„ä»¶</p></li></ul> <p>ä¾‹å¦‚ï¼ˆstringï¼‰ï¼šåœ¨ jsx ä¸­æˆ‘ä»¬å†™ä¸€ä¸ª</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è½¬æ¢ä¸ºjsçš„æ—¶å€™å°±å˜æˆäº†</p> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¾‹å¦‚ï¼ˆReactClass typeï¼‰ï¼šåœ¨jsxä¸­æˆ‘ä»¬å†™ä¸€ä¸ª</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MyDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>MyDiv<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>MyDiv<span class="token operator">&gt;</span>
</code></pre></div><p>è½¬æ¢ä¸ºjsçš„æ—¶å€™å°±å˜æˆäº†</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MyDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>MyDiv<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸Šè¾¹çš„ä¾‹å­ä¸­å¦‚æœå°†MyDivä¸­çš„é¦–å­—æ¯å°å†™ï¼Œå¦‚ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>myDiv<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>myDiv<span class="token operator">&gt;</span>
</code></pre></div><p>è½¬æ¢ä¸º js çš„æ—¶å€™å°±å˜æˆäº†</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MyDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç”±äºæ‰¾ä¸åˆ° myDiv è¿™ä¸ª domï¼Œæ‰€ä»¥å°±ä¼šæŠ¥é”™ã€‚</p> <h3 id="ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦-bind-this"><a href="#ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦-bind-this" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè°ƒç”¨æ–¹æ³•è¦ bind this</h3> <p>å‰æçŸ¥è¯†ï¼šæ·±åˆ»çš„ç†è§£ JavaScript ä¸­çš„ this</p> <p>ç›¸ä¿¡åˆšå†™ React çš„æ—¶å€™ï¼Œå¾ˆå¤šæœ‹å‹å¯èƒ½ä¼šå†™ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> xxx<span class="token punctuation">:</span> aaa <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‘ç°ä¼šæŠ¥ this æ˜¯ undefined çš„é”™ï¼Œç„¶åå¯èƒ½å¯¹äº‹ä»¶å¤„ç†æ¯”è¾ƒç–‘æƒ‘ï¼Œç„¶åå»çœ‹å®˜ç½‘çš„äº‹ä»¶å¤„ç†æœ‰ä¸‹é¢ä¸€æ®µè¯ï¼š</p> <blockquote><p>ä½ å¿…é¡»è°¨æ…å¯¹å¾… JSX å›è°ƒå‡½æ•°ä¸­çš„ thisï¼Œåœ¨ JavaScript ä¸­ï¼Œclass çš„æ–¹æ³•é»˜è®¤ä¸ä¼šç»‘å®šthisã€‚å¦‚æœä½ å¿˜è®°ç»‘å®š <code>this.handleClick</code>å¹¶æŠŠå®ƒä¼ å…¥äº† onClickï¼Œå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ this çš„å€¼ä¸º undefinedã€‚è¿™å¹¶ä¸æ˜¯ React ç‰¹æœ‰çš„è¡Œä¸ºï¼›è¿™å…¶å®ä¸ JavaScript å‡½æ•°å·¥ä½œåŸç†æœ‰å…³ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨æ–¹æ³•åé¢æ·»åŠ  ()ï¼Œä¾‹å¦‚ onClick={this.handleClick}ï¼Œä½ åº”è¯¥ä¸ºè¿™ä¸ªæ–¹æ³•ç»‘å®š thisã€‚</p></blockquote> <p>ç„¶åä½ çœ‹äº†å®˜ç½‘çš„ä¾‹å­å’Œå»ºè®®ä¹‹åï¼ŒçŸ¥é“éœ€è¦ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®š thiså°±èƒ½è§£å†³ï¼Œæƒ³ä¸‹é¢è¿™æ ·ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> xxx<span class="token punctuation">:</span> aaa <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½†æ˜¯å¯èƒ½ä½ æ²¡æœ‰å»æ€è€ƒè¿‡ä¸ºä»€ä¹ˆéœ€è¦ bind thisï¼Ÿå¦‚æœä½ ä¸èƒ½ç†è§£çš„è¯ï¼Œè¿˜æ˜¯ js çš„åŸºç¡€æ²¡æœ‰æ‰“å¥½ã€‚</p> <p><strong>React æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼Ÿ</strong></p> <p>å’±ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ React æ˜¯å¦‚ä½•å¤„ç†äº‹ä»¶çš„ã€‚</p> <p>React çš„äº‹ä»¶æ˜¯åˆæˆäº‹ä»¶ï¼Œ å†…éƒ¨åŸç†éå¸¸å¤æ‚ï¼Œæˆ‘è¿™é‡ŒåªæŠŠå…³é”®æ€§ï¼Œå¯ä»¥ç”¨æ¥è§£ç­”è¿™ä¸ªé—®é¢˜çš„åŸç†éƒ¨åˆ†è¿›è¡Œä»‹ç»å³å¯(åé¢åº”è¯¥ä¼šå†™ä¸€ç¯‡ react çš„äº‹ä»¶åŸç†ï¼Œæ•¬è¯·æœŸå¾…)ã€‚</p> <p>ä¸Šç¯‡æ–‡ç« å·²ç»è¯´è¿‡ï¼Œjsx å®é™…ä¸Šæ˜¯ React.createElement(component, props, â€¦children) å‡½æ•°æä¾›çš„è¯­æ³•ç³–ï¼Œé‚£ä¹ˆè¿™æ®µ jsx ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
     Click me
 <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>ä¼šè¢«è½¬åŒ–ä¸º</p> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     onClick<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Click me&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>äº†è§£äº†ä¸Šé¢çš„ï¼Œç„¶åç®€å•çš„ç†è§£ <code>react</code> å¦‚ä½•å¤„ç†äº‹ä»¶çš„ï¼ŒReact åœ¨ç»„ä»¶åŠ è½½(mount)å’Œæ›´æ–°(update)æ—¶ï¼Œå°†äº‹ä»¶é€šè¿‡ <code>addEventListener</code>  ç»Ÿä¸€æ³¨å†Œåˆ° <code>document</code> ä¸Šï¼Œç„¶åä¼šæœ‰ä¸€ä¸ªäº‹ä»¶æ± <code>å­˜å‚¨äº†æ‰€æœ‰çš„äº‹ä»¶</code>ï¼Œå½“äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œé€šè¿‡ <code>dispatchEvent</code> è¿›è¡Œäº‹ä»¶åˆ†å‘ã€‚</p> <p>æ‰€ä»¥ä½ å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼Œæœ€ç»ˆ this.handleClick ä¼šä½œä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°è°ƒç”¨ã€‚</p> <p>ç†è§£äº†è¿™ä¸ªï¼Œç„¶åå†æ¥çœ‹çœ‹å›è°ƒå‡½æ•°ä¸ºä»€ä¹ˆå°±ä¼šä¸¢å¤± thisã€‚</p> <h4 id="this-ç®€å•å›é¡¾"><a href="#this-ç®€å•å›é¡¾" aria-hidden="true" class="header-anchor">#</a> this ç®€å•å›é¡¾</h4> <blockquote><p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œthisçš„å€¼å–å†³äºå‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼ã€‚</p></blockquote> <p>å¦‚æœä½ ä¸èƒ½ç†è§£ä¸Šé¢é‚£å¥è¯ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦åœä¸‹æ¥é˜…è¯»æ–‡ç« ï¼Œå»æŸ¥ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œå¦åˆ™ä½ å¯èƒ½çœ‹ä¸æ‡‚ä¸‹é¢çš„ï¼Œå¦‚æœä½ æ‡’çš„è¯ï¼Œå°±çœ‹ä¸ºä½ å‡†å¤‡å¥½çš„ MDN å§ã€‚</p> <p>é€šè¿‡ä¸Šé¢å¯¹äº‹ä»¶å¤„ç†çš„ä»‹ç»ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸‹åœ¨ç±»ç»„ä»¶çš„ render å‡½æ•°ä¸­ï¼Œ æœ‰ç‚¹ç±»ä¼¼äºåšäº†è¿™æ ·çš„æ“ä½œ:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token function">sayThis</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œçš„ `this` æŒ‡å‘è°ï¼Ÿ</span>
     <span class="token punctuation">}</span>

     <span class="token function">exec</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sayThis<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span>
</code></pre></div><p>ä½ ä¼šå‘ç°æœ€ç»ˆç»“æœè¾“å‡ºçš„æ˜¯ <code>undefined</code>ï¼Œå¦‚æœä½ ä¸ç†è§£ä¸ºä»€ä¹ˆè¾“å‡ºçš„æ˜¯ undefinedï¼Œé‚£ä¹ˆè¿˜æ˜¯ä¸Šé¢è¯´çš„ï¼Œéœ€è¦å»æ·±åˆ»çš„ç†è§£ <code>this</code> çš„åŸç†ã€‚å¦‚æœä½ èƒ½ç†è§£è¾“å‡ºçš„æ˜¯ <code>undefined</code>ï¼Œé‚£ä¹ˆæˆ‘è§‰å¾—ä½ å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆéœ€è¦ <code>bind this</code>äº†ã€‚</p> <p>é‚£ä¹ˆä½ å¯èƒ½ä¼šé—®ï¼š<strong>ä¸ºä»€ä¹ˆReactæ²¡æœ‰è‡ªåŠ¨çš„æŠŠ bind é›†æˆåˆ° render æ–¹æ³•ä¸­å‘¢</strong>?åœ¨ exec è°ƒç”¨å›è°ƒçš„æ—¶å€™ç»‘å®šè¿›å»ï¼Œåƒè¿™æ ·ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token function">sayThis</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œçš„ `this` æŒ‡å‘è°ï¼Ÿ</span>
     <span class="token punctuation">}</span>

     <span class="token function">exec</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sayThis<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span>
</code></pre></div><p>å› ä¸º render å¤šæ¬¡è°ƒç”¨æ¯æ¬¡éƒ½è¦ bind ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥å®˜æ–¹å»ºè®®ä½ è‡ªå·±åœ¨ constructor ä¸­æ‰‹åŠ¨ bind è¾¾åˆ°æ€§èƒ½ä¼˜åŒ–ã€‚</p> <p><strong>å››ç§äº‹ä»¶å¤„ç†å¯¹æ¯”</strong></p> <p>å¯¹äºäº‹ä»¶å¤„ç†çš„å†™æ³•ä¹Ÿæœ‰å¥½å‡ ç§ï¼Œå’±ä»¬æ¥è¿›è¡Œå¯¹æ¯”ä¸€ä¸‹ï¼š</p> <ol><li>ç›´æ¥ bind this å‹</li></ol> <p>å°±æ˜¯åƒæ–‡ç« å¼€å§‹çš„é‚£æ ·ï¼Œç›´æ¥åœ¨äº‹ä»¶é‚£é‡Œ bind this</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> xxx<span class="token punctuation">:</span> aaa <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šå†™èµ·æ¥é¡ºæ‰‹ï¼Œä¸€å£æ°”å°±èƒ½æŠŠè¿™ä¸ªé€»è¾‘å†™å®Œï¼Œä¸ç”¨ç§»åŠ¨å…‰æ ‡åˆ°å…¶ä»–åœ°æ–¹ã€‚</p> <p>âŒ ç¼ºç‚¹ï¼šæ€§èƒ½ä¸å¤ªå¥½ï¼Œè¿™ç§æ–¹å¼è·Ÿ react å†…éƒ¨å¸®ä½  bind ä¸€æ ·çš„ï¼Œ<strong>æ¯æ¬¡ render éƒ½ä¼šè¿›è¡Œ bind</strong>ï¼Œè€Œä¸”å¦‚æœæœ‰ä¸¤ä¸ªå…ƒç´ çš„äº‹ä»¶å¤„ç†å‡½æ•°å¼åŒä¸€ä¸ªï¼Œä¹Ÿè¿˜æ˜¯è¦è¿›è¡Œ bindï¼Œè¿™æ ·ä¼šå¤šå†™ç‚¹ä»£ç ï¼Œè€Œä¸”è¿›è¡Œä¸¤æ¬¡ bindï¼Œæ€§èƒ½ä¸æ˜¯å¤ªå¥½ã€‚(å…¶å®è¿™ç‚¹æ€§èƒ½å¾€å¾€ä¸ä¼šæ˜¯æ€§èƒ½ç“¶é¢ˆçš„åœ°æ–¹ï¼Œå¦‚æœä½ è§‰å¾—é¡ºæ‰‹ï¼Œè¿™æ ·å†™å®Œå…¨æ²¡é—®é¢˜)</p> <ol><li>constuctor æ‰‹åŠ¨ bind å‹</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constuctor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> xxx<span class="token punctuation">:</span> aaa <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šç›¸æ¯”äºç¬¬ä¸€ç§æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºæ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œé‚£ä¹ˆåªä¼š bind ä¸€æ¬¡ï¼Œè€Œä¸”å¦‚æœæœ‰å¤šä¸ªå…ƒç´ éƒ½éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿä¸éœ€è¦é‡å¤ bindï¼ŒåŸºæœ¬ä¸Šè§£å†³äº†ç¬¬ä¸€ç§çš„ä¸¤ä¸ªç¼ºç‚¹ã€‚</p> <p>âŒ ç¼ºç‚¹ï¼šæ²¡æœ‰æ˜æ˜¾ç¼ºç‚¹ï¼Œç¡¬è¦è¯´çš„è¯å°±æ˜¯å¤ªä¸‘äº†ï¼Œç„¶åä¸é¡ºæ‰‹(æˆ‘è§‰å¾—ä¸‘ï¼Œä½ è§‰å¾—ä¸ä¸‘å°±è¿™ä¹ˆå†™å°±è¡Œäº†)ã€‚</p> <ol><li>ç®­å¤´å‡½æ•°å‹</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> xxx<span class="token punctuation">:</span> aaa <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šé¡ºæ‰‹ï¼Œå¥½çœ‹ã€‚</p> <p>âŒ ç¼ºç‚¹ï¼šæ¯æ¬¡ render éƒ½ä¼šé‡å¤åˆ›å»ºå‡½æ•°ï¼Œæ€§èƒ½ä¼šå·®ä¸€ç‚¹ã€‚</p> <ol start="4"><li>public class fields å‹</li></ol> <p>è¿™ç§ class fieldsè¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œæ®æˆ‘æ‰€çŸ¥ç›®å‰è¿˜æ²¡æœ‰è¢«çº³å…¥æ ‡å‡†ï¼Œå…·ä½“å¯è§è¿™é‡Œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> xxx<span class="token punctuation">:</span> aaa <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šå¥½çœ‹ï¼Œæ€§èƒ½å¥½ã€‚</p> <p>âŒ ç¼ºç‚¹ï¼šæ²¡æœ‰æ˜æ˜¾ç¼ºç‚¹ï¼Œå¦‚æœç¡¬è¦è¯´å¯èƒ½å°±æ˜¯è¦å¤šè£…ä¸€ä¸ª babel æ’ä»¶æ¥æ”¯æŒè¿™ç§è¯­æ³•ã€‚</p> <p>æ€»ç»“
æˆ‘å¹³æ—¶ç”¨çš„å°±è¿™å››ç§å†™æ³•ï¼Œæˆ‘è¿™è¾¹ä»ä»£ç çš„ç¾è§‚æ€§ã€æ€§èƒ½ä»¥åŠæ˜¯å¦é¡ºæ‰‹æ–¹ä¾¿å¯¹å„ç§å†™æ³•åšäº†ç®€å•çš„å¯¹æ¯”ã€‚å…¶å®æ¯ç§æ–¹æ³•åœ¨é¡¹ç›®é‡Œç”¨éƒ½æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œæ€§èƒ½æ–¹é¢åŸºæœ¬ä¸Šå¯ä»¥å¿½ç•¥ï¼Œå¯¹äºç¾è§‚æ€§å’Œé¡ºæ‰‹æ¯”è¾ƒä¸»è§‚ï¼Œæ‰€ä»¥æ€»ä½“æ¥è¯´å°±æ˜¯çœ‹å¤§å®¶çš„åå¥½å’¯ï¼Œå¦‚æœç¡¬è¦æ¨èçš„è¯ï¼Œæˆ‘è¿˜æ˜¯<code>æ¯”è¾ƒæ¨èç¬¬å››ç§å†™æ³•</code>ï¼Œç¾è§‚è€Œä¸”ä¸å½±å“æ€§èƒ½ã€‚</p> <h3 id="ä¸ºä»€ä¹ˆè¦-setstateï¼Œè€Œä¸æ˜¯ç›´æ¥-this-state-xx-oo"><a href="#ä¸ºä»€ä¹ˆè¦-setstateï¼Œè€Œä¸æ˜¯ç›´æ¥-this-state-xx-oo" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ setStateï¼Œè€Œä¸æ˜¯ç›´æ¥ this.state.xx = oo</h3> <p>è¿™ä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬å…¬å¸åç«¯å†™ React çš„æ—¶å€™æå‡ºçš„é—®é¢˜ï¼Œä¸ºå•¥ä¸èƒ½ç›´æ¥ä¿®æ”¹ stateï¼Œè¦ setState ä¸€ä¸‹ã€‚æˆ‘åœ¨æƒ³ï¼Œä» vue è½¬åˆ° React å¯èƒ½ä¹Ÿä¼šæœ‰è¿™ç§ç–‘é—®ï¼Œå› ä¸º vue ä¿®æ”¹çŠ¶æ€éƒ½æ˜¯ç›´æ¥æ”¹çš„ã€‚</p> <p>å¦‚æœæˆ‘ä»¬äº†è§£ <code>setState</code> çš„åŸç†çš„è¯ï¼Œå¯èƒ½å°±èƒ½è§£ç­”è¿™ä¸ªé—®é¢˜äº†ï¼ŒsetState åšçš„äº‹æƒ…<code>ä¸ä»…ä»…</code>åªæ˜¯ä¿®æ”¹äº† <code>this.state</code> çš„å€¼ï¼Œå¦å¤–æœ€é‡è¦çš„æ˜¯å®ƒä¼šè§¦å‘ React çš„æ›´æ–°æœºåˆ¶ï¼Œä¼šè¿›è¡Œ diff ï¼Œç„¶åå°† patch éƒ¨åˆ†æ›´æ–°åˆ°çœŸå® dom é‡Œã€‚</p> <p>å¦‚æœä½ ç›´æ¥ <code>this.state.xx == oo</code> çš„è¯ï¼Œstate çš„å€¼ç¡®å®ä¼šæ”¹ï¼Œä½†æ˜¯æ”¹äº†ä¸ä¼šè§¦å‘ UI çš„æ›´æ–°ï¼Œé‚£å°±ä¸æ˜¯æ•°æ®é©±åŠ¨äº†ã€‚</p> <p>é‚£ä¸ºä»€ä¹ˆ Vue ç›´æ¥ä¿®æ”¹ data å¯ä»¥è§¦å‘ UI çš„æ›´æ–°å‘¢ï¼Ÿå› ä¸º Vue åœ¨åˆ›å»º <code>UI</code> çš„æ—¶å€™ä¼šæŠŠè¿™äº› <code>data ç»™æ”¶é›†èµ·æ¥</code>ï¼Œå¹¶ä¸”åœ¨è¿™äº› data çš„è®¿é—®å™¨å±æ€§ setter è¿›è¡Œäº†é‡å†™ï¼Œåœ¨è¿™ä¸ªé‡å†™çš„æ–¹æ³•é‡Œä¼šå»è§¦å‘ UI çš„æ›´æ–°ã€‚å¦‚æœä½ æƒ³æ›´å¤šçš„äº†è§£ vue çš„åŸç†ï¼Œå¯ä»¥å»è´­ä¹°æŸ“é™Œå¤§ä½¬çš„å‰–æ Vue.js å†…éƒ¨è¿è¡Œæœºåˆ¶ã€‚</p> <blockquote><p>ä¸æ˜ç™½è®¿é—®å™¨å±æ€§çš„å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šæ·±å…¥ç†è§£JSé‡Œçš„å¯¹è±¡</p></blockquote> <h3 id="setstate-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜"><a href="#setstate-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ç›¸å…³é—®é¢˜</h3> <ol><li>setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</li></ol> <p>æˆ‘çš„å›ç­”æ˜¯æ‰§è¡Œè¿‡ç¨‹ä»£ç åŒæ­¥çš„ï¼Œåªæ˜¯<code>åˆæˆäº‹ä»¶</code>å’Œ<code>é’©å­å‡½æ•°</code>çš„è°ƒç”¨é¡ºåº<strong>åœ¨æ›´æ–°ä¹‹å‰</strong>ï¼Œå¯¼è‡´åœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­<strong>æ²¡æ³•ç«‹é©¬</strong>æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œå½¢å¼äº†æ‰€è°“çš„â€œå¼‚æ­¥â€ï¼Œæ‰€ä»¥è¡¨ç°å‡ºæ¥æœ‰æ—¶æ˜¯åŒæ­¥ï¼Œæœ‰æ—¶æ˜¯â€œå¼‚æ­¥â€ã€‚</p> <ol start="2"><li>ä½•æ—¶æ˜¯åŒæ­¥ï¼Œä½•æ—¶æ˜¯å¼‚æ­¥å‘¢ï¼Ÿ</li></ol> <p>åªåœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ˜¯â€œå¼‚æ­¥â€çš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’Œ <code>setTimeout/setInterval</code>ç­‰åŸç”Ÿ API ä¸­éƒ½æ˜¯åŒæ­¥çš„ã€‚ç®€å•çš„å¯ä»¥ç†è§£ä¸ºè¢« React æ§åˆ¶çš„å‡½æ•°é‡Œé¢å°±ä¼šè¡¨ç°å‡ºâ€œå¼‚æ­¥â€ï¼Œåä¹‹è¡¨ç°ä¸ºåŒæ­¥ã€‚</p> <ol start="3"><li>é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°å¼‚æ­¥çš„æƒ…å†µå‘¢ï¼Ÿ</li></ol> <p>ä¸ºäº†åšæ€§èƒ½ä¼˜åŒ–ï¼Œå°† state çš„æ›´æ–°å»¶ç¼“åˆ°æœ€å<code>æ‰¹é‡åˆå¹¶å†å»æ¸²æŸ“</code>å¯¹äºåº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ˜¯æœ‰æå¤§å¥½å¤„çš„ï¼Œå¦‚æœæ¯æ¬¡çš„çŠ¶æ€æ”¹å˜éƒ½å»é‡æ–°æ¸²æŸ“çœŸå® domï¼Œé‚£ä¹ˆå®ƒå°†å¸¦æ¥å·¨å¤§çš„æ€§èƒ½æ¶ˆè€—ã€‚</p> <ol start="4"><li>é‚£å¦‚ä½•åœ¨è¡¨ç°å‡ºå¼‚æ­¥çš„å‡½æ•°é‡Œå¯ä»¥å‡†ç¡®æ‹¿åˆ°æ›´æ–°åçš„ state å‘¢ï¼Ÿ</li></ol> <p>é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° setState(partialState, callback) ä¸­çš„ callback æ‹¿åˆ°æ›´æ–°åçš„ç»“æœã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   value<span class="token punctuation">:</span><span class="token string">'2'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ‹¿åˆ°æœ€æ–°stateæ•°æ®'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æˆ–è€…å¯ä»¥é€šè¿‡ç»™ setState ä¼ é€’å‡½æ•°æ¥è¡¨ç°å‡ºåŒæ­¥çš„æƒ…å†µï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> val<span class="token punctuation">:</span> newVal <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="5"><li>é‚£è¡¨ç°å‡ºå¼‚æ­¥çš„åŸç†æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</li></ol> <p>æˆ‘è¿™é‡Œè¿˜æ˜¯ç”¨æœ€ç®€å•çš„è¯­è¨€è®©ä½ ç†è§£ï¼šåœ¨ React çš„ setState å‡½æ•°å®ç°ä¸­ï¼Œä¼šæ ¹æ® isBatchingUpdates(<code>é»˜è®¤æ˜¯ false</code>) å˜é‡åˆ¤æ–­æ˜¯å¦ç›´æ¥æ›´æ–° this.state è¿˜æ˜¯æ”¾åˆ°é˜Ÿåˆ—ä¸­ç¨åæ›´æ–°ã€‚ç„¶åæœ‰ä¸€ä¸ª batchedUpdate å‡½æ•°ï¼Œå¯ä»¥ä¿®æ”¹ isBatchingUpdates ä¸º trueï¼Œå½“ React è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°ä¹‹å‰ï¼Œæˆ–è€…ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹‹å‰å°±ä¼šè°ƒç”¨ batchedUpdate å‡½æ•°ï¼Œè¿™æ ·çš„è¯ï¼ŒsetState å°±ä¸ä¼šåŒæ­¥æ›´æ–° this.stateï¼Œè€Œæ˜¯æ”¾åˆ°æ›´æ–°é˜Ÿåˆ—é‡Œé¢åç»­æ›´æ–°ã€‚</p> <p>è¿™æ ·ä½ å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶å’Œ <code>setTimeout/setinterval</code> é‡Œé¢è°ƒç”¨ this.state ä¼šåŒæ­¥æ›´æ–°äº†å§ï¼Œå› ä¸ºé€šè¿‡è¿™äº›å‡½æ•°è°ƒç”¨çš„ React æ²¡åŠæ³•å»è°ƒç”¨ <code>batchedUpdate</code> å‡½æ•°å°† <code>isBatchingUpdates</code> è®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ setState çš„æ—¶å€™é»˜è®¤å°±æ˜¯ falseï¼Œé‚£ä¹ˆå°±ä¼šåŒæ­¥æ›´æ–°ã€‚</p> <h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" aria-hidden="true" class="header-anchor">#</a> å‚è€ƒ</h2> <p><a href>React ä¸­ä¸ºä»€ä¹ˆè¦ bind this</a></p> <p><a href>ã€ŠReact çŠ¶æ€ç®¡ç†ä¸åŒæ„å®è·µã€‹</a></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/bookNotes/assets/js/app.a5c1f5ee.js" defer></script><script src="/bookNotes/assets/js/87.8a9e4f11.js" defer></script>
  </body>
</html>
