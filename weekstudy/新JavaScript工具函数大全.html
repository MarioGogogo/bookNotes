<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>新 JavaScript 工具函数大全 | 👨🏽‍💻前端漫游指南</title>
    <meta name="description" content="Never Stop Learning">
    <link rel="icon" href="/bookNotes/favicon.ico">
    
    <link rel="preload" href="/bookNotes/assets/css/0.styles.02a9e5b3.css" as="style"><link rel="preload" href="/bookNotes/assets/js/app.a5c1f5ee.js" as="script"><link rel="preload" href="/bookNotes/assets/js/91.f87deae7.js" as="script"><link rel="prefetch" href="/bookNotes/assets/js/10.7897844d.js"><link rel="prefetch" href="/bookNotes/assets/js/11.daa46aa2.js"><link rel="prefetch" href="/bookNotes/assets/js/12.19efc583.js"><link rel="prefetch" href="/bookNotes/assets/js/13.5b7f839d.js"><link rel="prefetch" href="/bookNotes/assets/js/14.47b4842d.js"><link rel="prefetch" href="/bookNotes/assets/js/15.959aa0c7.js"><link rel="prefetch" href="/bookNotes/assets/js/16.e07efd9a.js"><link rel="prefetch" href="/bookNotes/assets/js/17.06df2fb1.js"><link rel="prefetch" href="/bookNotes/assets/js/18.40dee455.js"><link rel="prefetch" href="/bookNotes/assets/js/19.ea09a6c5.js"><link rel="prefetch" href="/bookNotes/assets/js/2.2daf200c.js"><link rel="prefetch" href="/bookNotes/assets/js/20.ffb27053.js"><link rel="prefetch" href="/bookNotes/assets/js/21.33f73e1d.js"><link rel="prefetch" href="/bookNotes/assets/js/22.9e99b0e5.js"><link rel="prefetch" href="/bookNotes/assets/js/23.5417826f.js"><link rel="prefetch" href="/bookNotes/assets/js/24.59000dfc.js"><link rel="prefetch" href="/bookNotes/assets/js/25.acc91333.js"><link rel="prefetch" href="/bookNotes/assets/js/26.6af21f36.js"><link rel="prefetch" href="/bookNotes/assets/js/27.3d2e96f4.js"><link rel="prefetch" href="/bookNotes/assets/js/28.262d38c6.js"><link rel="prefetch" href="/bookNotes/assets/js/29.1eca77c6.js"><link rel="prefetch" href="/bookNotes/assets/js/3.2e998a1c.js"><link rel="prefetch" href="/bookNotes/assets/js/30.af641b29.js"><link rel="prefetch" href="/bookNotes/assets/js/31.3c9c863c.js"><link rel="prefetch" href="/bookNotes/assets/js/32.07ea838c.js"><link rel="prefetch" href="/bookNotes/assets/js/33.acab53c4.js"><link rel="prefetch" href="/bookNotes/assets/js/34.48dd7240.js"><link rel="prefetch" href="/bookNotes/assets/js/35.7c3ec624.js"><link rel="prefetch" href="/bookNotes/assets/js/36.ccd745ec.js"><link rel="prefetch" href="/bookNotes/assets/js/37.005d8f1b.js"><link rel="prefetch" href="/bookNotes/assets/js/38.fc6a5f21.js"><link rel="prefetch" href="/bookNotes/assets/js/39.44489367.js"><link rel="prefetch" href="/bookNotes/assets/js/4.dd5fac1d.js"><link rel="prefetch" href="/bookNotes/assets/js/40.34c225a3.js"><link rel="prefetch" href="/bookNotes/assets/js/41.1e7d641f.js"><link rel="prefetch" href="/bookNotes/assets/js/42.236029dd.js"><link rel="prefetch" href="/bookNotes/assets/js/43.09a1cad0.js"><link rel="prefetch" href="/bookNotes/assets/js/44.8165a802.js"><link rel="prefetch" href="/bookNotes/assets/js/45.01f5f11f.js"><link rel="prefetch" href="/bookNotes/assets/js/46.46b782a7.js"><link rel="prefetch" href="/bookNotes/assets/js/47.1ec61019.js"><link rel="prefetch" href="/bookNotes/assets/js/48.625d747e.js"><link rel="prefetch" href="/bookNotes/assets/js/49.f97abe71.js"><link rel="prefetch" href="/bookNotes/assets/js/5.dd4a8225.js"><link rel="prefetch" href="/bookNotes/assets/js/50.68dee525.js"><link rel="prefetch" href="/bookNotes/assets/js/51.583184a8.js"><link rel="prefetch" href="/bookNotes/assets/js/52.c7af0993.js"><link rel="prefetch" href="/bookNotes/assets/js/53.b647ed86.js"><link rel="prefetch" href="/bookNotes/assets/js/54.a5fbaa3d.js"><link rel="prefetch" href="/bookNotes/assets/js/55.a7b560d2.js"><link rel="prefetch" href="/bookNotes/assets/js/56.33015b4d.js"><link rel="prefetch" href="/bookNotes/assets/js/57.80ffe644.js"><link rel="prefetch" href="/bookNotes/assets/js/58.11a6edd1.js"><link rel="prefetch" href="/bookNotes/assets/js/59.e8bead8f.js"><link rel="prefetch" href="/bookNotes/assets/js/6.4505f2dd.js"><link rel="prefetch" href="/bookNotes/assets/js/60.cda1b788.js"><link rel="prefetch" href="/bookNotes/assets/js/61.16b57984.js"><link rel="prefetch" href="/bookNotes/assets/js/62.0476eb6a.js"><link rel="prefetch" href="/bookNotes/assets/js/63.f31d1faa.js"><link rel="prefetch" href="/bookNotes/assets/js/64.2e35d3be.js"><link rel="prefetch" href="/bookNotes/assets/js/65.e4ba2ad2.js"><link rel="prefetch" href="/bookNotes/assets/js/66.c2f247d4.js"><link rel="prefetch" href="/bookNotes/assets/js/67.393df1f2.js"><link rel="prefetch" href="/bookNotes/assets/js/68.875cabd4.js"><link rel="prefetch" href="/bookNotes/assets/js/69.54e25a4e.js"><link rel="prefetch" href="/bookNotes/assets/js/7.670f9f76.js"><link rel="prefetch" href="/bookNotes/assets/js/70.17e6d438.js"><link rel="prefetch" href="/bookNotes/assets/js/71.95131df7.js"><link rel="prefetch" href="/bookNotes/assets/js/72.83e3f4f8.js"><link rel="prefetch" href="/bookNotes/assets/js/73.2a333618.js"><link rel="prefetch" href="/bookNotes/assets/js/74.13fba1a5.js"><link rel="prefetch" href="/bookNotes/assets/js/75.8ea1e0ca.js"><link rel="prefetch" href="/bookNotes/assets/js/76.1bd9ac71.js"><link rel="prefetch" href="/bookNotes/assets/js/77.470d01e4.js"><link rel="prefetch" href="/bookNotes/assets/js/78.29be0910.js"><link rel="prefetch" href="/bookNotes/assets/js/79.0da8502d.js"><link rel="prefetch" href="/bookNotes/assets/js/8.3c63f96d.js"><link rel="prefetch" href="/bookNotes/assets/js/80.f840286c.js"><link rel="prefetch" href="/bookNotes/assets/js/81.8dc38613.js"><link rel="prefetch" href="/bookNotes/assets/js/82.63f9f794.js"><link rel="prefetch" href="/bookNotes/assets/js/83.92125d6e.js"><link rel="prefetch" href="/bookNotes/assets/js/84.2dd13e00.js"><link rel="prefetch" href="/bookNotes/assets/js/85.90ac8d90.js"><link rel="prefetch" href="/bookNotes/assets/js/86.00a9730f.js"><link rel="prefetch" href="/bookNotes/assets/js/87.8a9e4f11.js"><link rel="prefetch" href="/bookNotes/assets/js/88.4b63d7ed.js"><link rel="prefetch" href="/bookNotes/assets/js/89.8cbf23b4.js"><link rel="prefetch" href="/bookNotes/assets/js/9.2033ddc1.js"><link rel="prefetch" href="/bookNotes/assets/js/90.871ef198.js"><link rel="prefetch" href="/bookNotes/assets/js/92.3eb8316d.js"><link rel="prefetch" href="/bookNotes/assets/js/93.ccc52aee.js"><link rel="prefetch" href="/bookNotes/assets/js/94.17ce85a1.js"><link rel="prefetch" href="/bookNotes/assets/js/95.490c860d.js"><link rel="prefetch" href="/bookNotes/assets/js/96.ed694272.js"><link rel="prefetch" href="/bookNotes/assets/js/97.e9cae244.js">
    <link rel="stylesheet" href="/bookNotes/assets/css/0.styles.02a9e5b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bookNotes/" class="home-link router-link-active"><!----> <span class="site-name">👨🏽‍💻前端漫游指南</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bookNotes/macosguide/" class="nav-link">MacOS配置</a></div><div class="nav-item"><a href="/bookNotes/weekstudy/" class="nav-link router-link-active">周学系列</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bookNotes/cssmagic/" class="nav-link">CSS揭秘</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/algorithm/" class="nav-link">前端数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/interview/" class="nav-link">面试知多少</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/reactstatus/" class="nav-link">React状态管理与同构实战</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/koa2/" class="nav-link">Koa2系列</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/nodejs/" class="nav-link">Nodejs系列</a></li></ul></div></div><div class="nav-item"><a href="http://h5web.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo/react" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bookNotes/macosguide/" class="nav-link">MacOS配置</a></div><div class="nav-item"><a href="/bookNotes/weekstudy/" class="nav-link router-link-active">周学系列</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bookNotes/cssmagic/" class="nav-link">CSS揭秘</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/algorithm/" class="nav-link">前端数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/interview/" class="nav-link">面试知多少</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/reactstatus/" class="nav-link">React状态管理与同构实战</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/koa2/" class="nav-link">Koa2系列</a></li><li class="dropdown-item"><!----> <a href="/bookNotes/nodejs/" class="nav-link">Nodejs系列</a></li></ul></div></div><div class="nav-item"><a href="http://h5web.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/MarioGogogo/react" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/bookNotes/weekstudy/" class="sidebar-link">用好谷歌!!!(重点)</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年38周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年39周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年40周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年41周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>2019年42周</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html" class="active sidebar-link">新 JavaScript 工具函数大全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#第一部分：数组" class="sidebar-link">第一部分：数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_1-all：布尔全等判断" class="sidebar-link">1. all：布尔全等判断</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_2-allequal：检查数组各项相等" class="sidebar-link">2. allEqual：检查数组各项相等</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_3-approximatelyequal：约等于" class="sidebar-link">3. approximatelyEqual：约等于</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_4-arraytocsv：数组转-csv-格式（带空格的字符串）" class="sidebar-link">4. arrayToCSV：数组转  CSV 格式（带空格的字符串）</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_5-arraytohtmllist：数组转-li-列表" class="sidebar-link">5. arrayToHtmlList：数组转  li 列表</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_6-average：平均数" class="sidebar-link">6. average：平均数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_7-averageby：数组对象属性平均数" class="sidebar-link">7. averageBy：数组对象属性平均数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_8-bifurcate：拆分断言后的数组" class="sidebar-link">8. bifurcate：拆分断言后的数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_9-castarray：其它类型转数组" class="sidebar-link">9. castArray：其它类型转数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_10-compact：去除数组中的无效-无用值" class="sidebar-link">10. compact：去除数组中的无效 / 无用值</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_11-countoccurrences：检测数值出现次数" class="sidebar-link">11. countOccurrences：检测数值出现次数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_12-deepflatten：递归扁平化数组" class="sidebar-link">12. deepFlatten：递归扁平化数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_13-difference：寻找差异" class="sidebar-link">13. difference：寻找差异</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_14-differenceby：先执行再寻找差异" class="sidebar-link">14. differenceBy：先执行再寻找差异</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_15-dropwhile：删除不符合条件的值" class="sidebar-link">15. dropWhile：删除不符合条件的值</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_16-flatten：指定深度扁平化数组" class="sidebar-link">16. flatten：指定深度扁平化数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_17-indexofall：返回数组中某值的所有索引" class="sidebar-link">17. indexOfAll：返回数组中某值的所有索引</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_18-intersection：两数组的交集" class="sidebar-link">18. intersection：两数组的交集</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_19-intersectionwith：两数组都符合条件的交集" class="sidebar-link">19. intersectionWith：两数组都符合条件的交集</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_20-intersectionwith：先比较后返回交集" class="sidebar-link">20. intersectionWith：先比较后返回交集</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_21-minn：返回指定长度的升序数组" class="sidebar-link">21. minN：返回指定长度的升序数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_22-negate：根据条件反向筛选" class="sidebar-link">22. negate：根据条件反向筛选</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_23-randomintarrayinrange：生成两数之间指定长度的随机数组" class="sidebar-link">23. randomIntArrayInRange：生成两数之间指定长度的随机数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_24-sample：在指定数组中获取随机数" class="sidebar-link">24. sample：在指定数组中获取随机数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_25-samplesize：在指定数组中获取指定长度的随机数" class="sidebar-link">25. sampleSize：在指定数组中获取指定长度的随机数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_26-shuffle：“洗牌”-数组" class="sidebar-link">26. shuffle：“洗牌” 数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_27-nest：根据-parent-id-生成树结构（阿里一面真题）" class="sidebar-link">27. nest：根据  parent_id 生成树结构（阿里一面真题）</a></li></ul></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#第二部分：函数" class="sidebar-link">第二部分：函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_1-attempt：捕获函数运行异常" class="sidebar-link">1. attempt：捕获函数运行异常</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_2-defer：推迟执行" class="sidebar-link">2. defer：推迟执行</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_3-runpromisesinseries：运行多个-promises" class="sidebar-link">3. runPromisesInSeries：运行多个  Promises</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_4-timetaken：计算函数执行时间" class="sidebar-link">4. timeTaken：计算函数执行时间</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_5-createeventhub：简单的发布-订阅模式" class="sidebar-link">5. createEventHub：简单的发布 / 订阅模式</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_6-memoize：缓存函数" class="sidebar-link">6. memoize：缓存函数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_7-once：只调用一次的函数" class="sidebar-link">7. once：只调用一次的函数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_8-flattenobject：以键的路径扁平化对象" class="sidebar-link">8. flattenObject：以键的路径扁平化对象</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_9-unflattenobject：以键的路径展开对象" class="sidebar-link">9. unflattenObject：以键的路径展开对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#第三部分：字符串" class="sidebar-link">第三部分：字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_1-bytesize：返回字符串的字节长度" class="sidebar-link">1. byteSize：返回字符串的字节长度</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_2-capitalize：首字母大写" class="sidebar-link">2. capitalize：首字母大写</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_3-capitalizeeveryword：每个单词首字母大写" class="sidebar-link">3. capitalizeEveryWord：每个单词首字母大写</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_4-decapitalize：首字母小写" class="sidebar-link">4. decapitalize：首字母小写</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_5-luhncheck：银行卡号码校验（-luhn算法）" class="sidebar-link">5. luhnCheck：银行卡号码校验（ luhn算法）</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_6-splitlines：将多行字符串拆分为行数组。" class="sidebar-link">6. splitLines：将多行字符串拆分为行数组。</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_7-striphtmltags：删除字符串中的-html标签" class="sidebar-link">7. stripHTMLTags：删除字符串中的  HTMl标签</a></li></ul></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#第四部分：对象" class="sidebar-link">第四部分：对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_1-dayofyear：当前日期天数" class="sidebar-link">1. dayOfYear：当前日期天数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_2-forown：迭代属性并执行回调" class="sidebar-link">2. forOwn：迭代属性并执行回调</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_3-gettimefromdate：返回当前-24-小时制时间的字符串" class="sidebar-link">3. GetTimeFromDate：返回当前 24 小时制时间的字符串</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_4-getdaysbetweendates：返回日期间的天数" class="sidebar-link">4. GetDaysBetweenDates：返回日期间的天数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_5-is：检查值是否为特定类型。" class="sidebar-link">5. is：检查值是否为特定类型。</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_6-isafterdate：检查是否在某日期后" class="sidebar-link">6. isAfterDate：检查是否在某日期后</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_7-isbeforedate：检查是否在某日期前" class="sidebar-link">7. isBeforeDate：检查是否在某日期前</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_8-tomorrow：获取明天的字符串格式时间" class="sidebar-link">8 tomorrow：获取明天的字符串格式时间</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_9-equals：全等判断" class="sidebar-link">9. equals：全等判断</a></li></ul></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#第五部分：数字" class="sidebar-link">第五部分：数字</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_1-randomintegerinrange：生成指定范围的随机整数" class="sidebar-link">1. randomIntegerInRange：生成指定范围的随机整数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_2-randomnumberinrange：生成指定范围的随机小数" class="sidebar-link">2. randomNumberInRange：生成指定范围的随机小数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_3-round：四舍五入到指定位数" class="sidebar-link">3. round：四舍五入到指定位数</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_4-sum：计算数组或多个数字的总和" class="sidebar-link">4. sum：计算数组或多个数字的总和</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_5-tocurrency：简单的货币单位转换" class="sidebar-link">5. toCurrency：简单的货币单位转换</a></li></ul></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#第六部分：浏览器操作及其它" class="sidebar-link">第六部分：浏览器操作及其它</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_1-bottomvisible：检查页面底部是否可见" class="sidebar-link">1. bottomVisible：检查页面底部是否可见</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_2-createdirectory：检查创建目录" class="sidebar-link">2. CreateDirectory：检查创建目录</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_3-currenturl：返回当前链接-url" class="sidebar-link">3. currentURL：返回当前链接  url</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_4-distance：返回两点间的距离" class="sidebar-link">4. distance：返回两点间的距离</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_5-elementcontains：检查是否包含子元素" class="sidebar-link">5. elementContains：检查是否包含子元素</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_6-getstyle：返回指定元素的生效样式" class="sidebar-link">6. getStyle：返回指定元素的生效样式</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_7-gettype：返回值或变量的类型名" class="sidebar-link">7. getType：返回值或变量的类型名</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_8-hasclass：校验指定元素的类名" class="sidebar-link">8. hasClass：校验指定元素的类名</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_9-hide：隐藏所有的指定标签" class="sidebar-link">9. hide：隐藏所有的指定标签</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_10-httpsredirect：-http-跳转-https" class="sidebar-link">10. httpsRedirect： HTTP  跳转  HTTPS</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_11-insertafter：在指定元素之后插入新元素" class="sidebar-link">11. insertAfter：在指定元素之后插入新元素</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_12-insertbefore：在指定元素之前插入新元素" class="sidebar-link">12. insertBefore：在指定元素之前插入新元素</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_13-isbrowser：检查是否为浏览器环境" class="sidebar-link">13. isBrowser：检查是否为浏览器环境</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_14-isbrowsertab：检查当前标签页是否活动" class="sidebar-link">14. isBrowserTab：检查当前标签页是否活动</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_15-nodelisttoarray：转换-nodelist为数组" class="sidebar-link">15. nodeListToArray：转换  nodeList为数组</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_16-randomhexadecimalcolorcode：随机十六进制颜色" class="sidebar-link">16. RandomHexadecimalColorCode：随机十六进制颜色</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_17-scrolltotop：平滑滚动至顶部" class="sidebar-link">17. scrollToTop：平滑滚动至顶部</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_18-smoothscroll：滚动到指定元素区域" class="sidebar-link">18. smoothScroll：滚动到指定元素区域</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_19-detectdevicetype：检测移动-pc-设备" class="sidebar-link">19. detectDeviceType：检测移动 / PC 设备</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_20-getscrollposition：返回当前的滚动位置" class="sidebar-link">20. getScrollPosition：返回当前的滚动位置</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_21-size：获取不同类型变量的长度" class="sidebar-link">21. size：获取不同类型变量的长度</a></li><li class="sidebar-sub-header"><a href="/bookNotes/weekstudy/新JavaScript工具函数大全.html#_22-escapehtml：转义-html" class="sidebar-link">22. escapeHTML：转义  HTML</a></li></ul></li></ul></li><li><a href="/bookNotes/weekstudy/Generator基础.html" class="sidebar-link">Generator 基础</a></li><li><a href="/bookNotes/weekstudy/8道有意思的JavaScript面试题.html" class="sidebar-link">8道有意思的JavaScript面试题</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年43周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年44周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年45周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年46周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年47周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年48周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年49周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年51周</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019年52周</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="新-javascript-工具函数大全"><a href="#新-javascript-工具函数大全" aria-hidden="true" class="header-anchor">#</a> 新 JavaScript 工具函数大全</h1> <p>原文地址 https://mp.weixin.qq.com/s/ua7ztaI7bnwyegmPrr8fSQ</p> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p><strong>一线大厂笔试题灵感来源</strong></p> <table><thead><tr><th>目录</th> <th>说明</th></tr></thead> <tbody><tr><td>第一部分</td> <td>数组，27 段</td></tr> <tr><td>第二部分</td> <td>函数，9 段</td></tr> <tr><td>第三部分</td> <td>字符串，7 段</td></tr> <tr><td>第四部分</td> <td>对象，9 段</td></tr> <tr><td>第五部分</td> <td>数字，5 段</td></tr> <tr><td>第六部分</td> <td>浏览器操作及其它，22 段</td></tr></tbody></table> <p><strong>筛选自以下两篇文章：</strong></p> <blockquote><ul><li><p>《127 Helpful JavaScript Snippets You Can Learn in 30 Seconds or Less》</p></li> <li><p>《30 seconds of code》</p></li></ul></blockquote> <p>原本只想筛选下上面的那篇文章，在精简掉了部分多余且无用的代码片段后，感觉不够。于是顺藤摸瓜，找到了原地址：</p> <blockquote><p>30 seconds of code</p></blockquote> <p>然后将所有代码段都看了遍，筛选了以下一百多段代码片段，并加入了部分自己的理解。另外，<strong>本文工具函数的命名非常值得借鉴。</strong></p> <h2 id="第一部分：数组"><a href="#第一部分：数组" aria-hidden="true" class="header-anchor">#</a> 第一部分：数组</h2> <h3 id="_1-all：布尔全等判断"><a href="#_1-all：布尔全等判断" aria-hidden="true" class="header-anchor">#</a> 1. all：布尔全等判断</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">all</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> fn <span class="token operator">=</span> Boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_2-allequal：检查数组各项相等"><a href="#_2-allequal：检查数组各项相等" aria-hidden="true" class="header-anchor">#</a> 2. allEqual：检查数组各项相等</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">allEqual</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> val <span class="token operator">===</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">allEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">allEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_3-approximatelyequal：约等于"><a href="#_3-approximatelyequal：约等于" aria-hidden="true" class="header-anchor">#</a> 3. approximatelyEqual：约等于</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">approximatelyEqual</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> epsilon <span class="token operator">=</span> <span class="token number">0.001</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>v1 <span class="token operator">-</span> v2<span class="token punctuation">)</span> <span class="token operator">&lt;</span> epsilon<span class="token punctuation">;</span>
<span class="token function">approximatelyEqual</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1.5708</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_4-arraytocsv：数组转-csv-格式（带空格的字符串）"><a href="#_4-arraytocsv：数组转-csv-格式（带空格的字符串）" aria-hidden="true" class="header-anchor">#</a> 4. arrayToCSV：数组转  CSV 格式（带空格的字符串）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arrayToCSV <span class="token operator">=</span> <span class="token punctuation">(</span>arr<span class="token punctuation">,</span> delimiter <span class="token operator">=</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>delimiter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">arrayToCSV</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '&quot;a&quot;,&quot;b&quot;\n&quot;c&quot;,&quot;d&quot;'</span>
<span class="token function">arrayToCSV</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '&quot;a&quot;;&quot;b&quot;\n&quot;c&quot;;&quot;d&quot;'</span>
</code></pre></div><h3 id="_5-arraytohtmllist：数组转-li-列表"><a href="#_5-arraytohtmllist：数组转-li-列表" aria-hidden="true" class="header-anchor">#</a> 5. arrayToHtmlList：数组转  li 列表</h3> <p>此代码段将数组的元素转换为 <code>&lt;li&gt;</code>标签，并将其附加到给定 ID 的列表中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">arrayToHtmlList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> listID</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span>el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span> <span class="token operator">+</span> listID<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`&lt;li&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">arrayToHtmlList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;item 1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item 2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;myListID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-average：平均数"><a href="#_6-average：平均数" aria-hidden="true" class="header-anchor">#</a> 6. average：平均数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">average</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>nums</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> nums<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token function">average</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token function">average</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h3 id="_7-averageby：数组对象属性平均数"><a href="#_7-averageby：数组对象属性平均数" aria-hidden="true" class="header-anchor">#</a> 7. averageBy：数组对象属性平均数</h3> <p>此代码段将获取数组对象属性的平均值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">averageBy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">?</span> <span class="token function-variable function">fn</span> <span class="token punctuation">:</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> val<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token function">averageBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
<span class="token function">averageBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> n<span class="token punctuation">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre></div><h3 id="_8-bifurcate：拆分断言后的数组"><a href="#_8-bifurcate：拆分断言后的数组" aria-hidden="true" class="header-anchor">#</a> 8. bifurcate：拆分断言后的数组</h3> <p>可以根据每个元素返回的值，使用 <code>reduce()</code>和 <code>push()</code> 将元素添加到第二次参数 <code>fn</code>中 。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">bifurcate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> filter</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>acc<span class="token punctuation">[</span>filter<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> acc<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bifurcate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;beep&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;boop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span>
</code></pre></div><h3 id="_9-castarray：其它类型转数组"><a href="#_9-castarray：其它类型转数组" aria-hidden="true" class="header-anchor">#</a> 9. castArray：其它类型转数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">castArray</span> <span class="token operator">=</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">?</span> val <span class="token punctuation">:</span> <span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">castArray</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['foo']</span>
<span class="token function">castArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
<span class="token function">castArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
</code></pre></div><h3 id="_10-compact：去除数组中的无效-无用值"><a href="#_10-compact：去除数组中的无效-无用值" aria-hidden="true" class="header-anchor">#</a> 10. compact：去除数组中的无效 / 无用值</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">compact</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span> <span class="token operator">*</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ 1, 2, 3, 'a', 's', 34 ]</span>
</code></pre></div><h3 id="_11-countoccurrences：检测数值出现次数"><a href="#_11-countoccurrences：检测数值出现次数" aria-hidden="true" class="header-anchor">#</a> 11. countOccurrences：检测数值出现次数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">countOccurrences</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> val <span class="token operator">?</span> a <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">:</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">countOccurrences</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><h3 id="_12-deepflatten：递归扁平化数组"><a href="#_12-deepflatten：递归扁平化数组" aria-hidden="true" class="header-anchor">#</a> 12. deepFlatten：递归扁平化数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">deepFlatten</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">deepFlatten</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">:</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">deepFlatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4,5]</span>
</code></pre></div><h3 id="_13-difference：寻找差异"><a href="#_13-difference：寻找差异" aria-hidden="true" class="header-anchor">#</a> 13. difference：寻找差异</h3> <p>此代码段查找两个数组之间的差异。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">difference</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">difference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3]</span>
</code></pre></div><h3 id="_14-differenceby：先执行再寻找差异"><a href="#_14-differenceby：先执行再寻找差异" aria-hidden="true" class="header-anchor">#</a> 14. differenceBy：先执行再寻找差异</h3> <p>在将给定函数应用于两个列表的每个元素之后，此方法返回两个数组之间的差异。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">differenceBy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">differenceBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2.1</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2.3</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1.2]</span>
<span class="token function">differenceBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ { x: 2 } ]</span>
</code></pre></div><h3 id="_15-dropwhile：删除不符合条件的值"><a href="#_15-dropwhile：删除不符合条件的值" aria-hidden="true" class="header-anchor">#</a> 15. dropWhile：删除不符合条件的值</h3> <p>此代码段从数组顶部开始删除元素，直到传递的函数返回为 <code>true</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">dropWhile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">func</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">dropWhile</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">n</span> <span class="token operator">=&gt;</span> n <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3,4]</span>
</code></pre></div><h3 id="_16-flatten：指定深度扁平化数组"><a href="#_16-flatten：指定深度扁平化数组" aria-hidden="true" class="header-anchor">#</a> 16. flatten：指定深度扁平化数组</h3> <p>此代码段第二参数可指定深度。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">flatten</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>depth <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flatten</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> depth <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> v<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">flatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>
<span class="token function">flatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, [4, 5], 6, 7, 8]</span>
</code></pre></div><h3 id="_17-indexofall：返回数组中某值的所有索引"><a href="#_17-indexofall：返回数组中某值的所有索引" aria-hidden="true" class="header-anchor">#</a> 17. indexOfAll：返回数组中某值的所有索引</h3> <p>此代码段可用于获取数组中某个值的所有索引，如果此值中未包含该值，则返回一个空数组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">indexOfAll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> el<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>el <span class="token operator">===</span> val <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>acc<span class="token punctuation">,</span> i<span class="token punctuation">]</span> <span class="token punctuation">:</span> acc<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">indexOfAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0,3]</span>
<span class="token function">indexOfAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
</code></pre></div><h3 id="_18-intersection：两数组的交集"><a href="#_18-intersection：两数组的交集" aria-hidden="true" class="header-anchor">#</a> 18. intersection：两数组的交集</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">intersection</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">intersection</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3]</span>
</code></pre></div><h3 id="_19-intersectionwith：两数组都符合条件的交集"><a href="#_19-intersectionwith：两数组都符合条件的交集" aria-hidden="true" class="header-anchor">#</a> 19. intersectionWith：两数组都符合条件的交集</h3> <p>此片段可用于在对两个数组的每个元素执行了函数之后，返回两个数组中存在的元素列表。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">intersectionBy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">intersectionBy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2.1</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2.3</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2.1]</span>
</code></pre></div><h3 id="_20-intersectionwith：先比较后返回交集"><a href="#_20-intersectionwith：先比较后返回交集" aria-hidden="true" class="header-anchor">#</a> 20. intersectionWith：先比较后返回交集</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">intersectionWith</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> comp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">y</span> <span class="token operator">=&gt;</span> <span class="token function">comp</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">intersectionWith</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3.9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">===</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1.5, 3, 0]</span>
</code></pre></div><h3 id="_21-minn：返回指定长度的升序数组"><a href="#_21-minn：返回指定长度的升序数组" aria-hidden="true" class="header-anchor">#</a> 21. minN：返回指定长度的升序数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">minN</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">minN</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
<span class="token function">minN</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2]</span>
</code></pre></div><h3 id="_22-negate：根据条件反向筛选"><a href="#_22-negate：根据条件反向筛选" aria-hidden="true" class="header-anchor">#</a> 22. negate：根据条件反向筛选</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">negate</span> <span class="token operator">=</span> <span class="token parameter">func</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token function">negate</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 3, 5 ]</span>
</code></pre></div><h3 id="_23-randomintarrayinrange：生成两数之间指定长度的随机数组"><a href="#_23-randomintarrayinrange：生成两数之间指定长度的随机数组" aria-hidden="true" class="header-anchor">#</a> 23. randomIntArrayInRange：生成两数之间指定长度的随机数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">randomIntArrayInRange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token punctuation">:</span> n <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">randomIntArrayInRange</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]</span>
</code></pre></div><h3 id="_24-sample：在指定数组中获取随机数"><a href="#_24-sample：在指定数组中获取随机数" aria-hidden="true" class="header-anchor">#</a> 24. sample：在指定数组中获取随机数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sample</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">sample</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9</span>
</code></pre></div><h3 id="_25-samplesize：在指定数组中获取指定长度的随机数"><a href="#_25-samplesize：在指定数组中获取指定长度的随机数" aria-hidden="true" class="header-anchor">#</a> 25. sampleSize：在指定数组中获取指定长度的随机数</h3> <p>此代码段可用于从数组中获取指定长度的随机数，直至穷尽数组。<strong>使用 <code>Fisher-Yates</code>算法对数组中的元素进行随机选择。</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sampleSize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> m <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> m<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sampleSize</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3,1]</span>
<span class="token function">sampleSize</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2,3,1]</span>
</code></pre></div><h3 id="_26-shuffle：“洗牌”-数组"><a href="#_26-shuffle：“洗牌”-数组" aria-hidden="true" class="header-anchor">#</a> 26. shuffle：“洗牌” 数组</h3> <p>此代码段使用 <code>Fisher-Yates</code>算法随机排序数组的元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">shuffle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> m <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> m<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">shuffle</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3, 1], foo = [1, 2, 3]</span>
</code></pre></div><h3 id="_27-nest：根据-parent-id-生成树结构（阿里一面真题）"><a href="#_27-nest：根据-parent-id-生成树结构（阿里一面真题）" aria-hidden="true" class="header-anchor">#</a> 27. nest：根据  parent_id 生成树结构（阿里一面真题）</h3> <p>根据每项的 <code>parent_id</code>，生成具体树形结构的对象。</p> <p><strong>重点理解</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> nest <span class="token operator">=</span> <span class="token punctuation">(</span>array<span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> link <span class="token operator">=</span> <span class="token string">&quot;parent_id&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span>link<span class="token punctuation">]</span> <span class="token operator">===</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>item<span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token function">nest</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>用法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> parent_id<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> parent_id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> parent_id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> parent_id<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> parent_id<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nestedComments <span class="token operator">=</span> <span class="token function">nest</span><span class="token punctuation">(</span>comments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{ id: 1, parent_id: null, children: [...] }]</span>
</code></pre></div><p><img src="http://book.52react.cn/20191018133323.png" alt> <strong>强烈建议去理解这个的实现，因为这是我亲身遇到的阿里一面真题：</strong> <img src="http://book.52react.cn/20191018133347.png" alt></p> <h2 id="第二部分：函数"><a href="#第二部分：函数" aria-hidden="true" class="header-anchor">#</a> 第二部分：函数</h2> <h3 id="_1-attempt：捕获函数运行异常"><a href="#_1-attempt：捕获函数运行异常" aria-hidden="true" class="header-anchor">#</a> 1. attempt：捕获函数运行异常</h3> <p>该代码段执行一个函数，返回结果或捕获的错误对象。</p> <div class="language-js extra-class"><pre class="language-js"><code>onst <span class="token function-variable function">attempt</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> e <span class="token keyword">instanceof</span> <span class="token class-name">Error</span> <span class="token operator">?</span> e <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> elements <span class="token operator">=</span> <span class="token function">attempt</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'&gt;_&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>elements <span class="token keyword">instanceof</span> <span class="token class-name">Error</span><span class="token punctuation">)</span> elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// elements = []</span>

</code></pre></div><h3 id="_2-defer：推迟执行"><a href="#_2-defer：推迟执行" aria-hidden="true" class="header-anchor">#</a> 2. defer：推迟执行</h3> <p>此代码段延迟了函数的执行，直到清除了当前调用堆栈。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">defer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">defer</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs 'b' then 'a'</span>
</code></pre></div><h3 id="_3-runpromisesinseries：运行多个-promises"><a href="#_3-runpromisesinseries：运行多个-promises" aria-hidden="true" class="header-anchor">#</a> 3. runPromisesInSeries：运行多个  <code>Promises</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">runPromisesInSeries</span> <span class="token operator">=</span> <span class="token parameter">ps</span> <span class="token operator">=&gt;</span> ps<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">runPromisesInSeries</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//依次执行每个Promises ，总共需要3秒钟才能完成</span>
</code></pre></div><h3 id="_4-timetaken：计算函数执行时间"><a href="#_4-timetaken：计算函数执行时间" aria-hidden="true" class="header-anchor">#</a> 4. timeTaken：计算函数执行时间</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">timeTaken</span> <span class="token operator">=</span> <span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&quot;timeTaken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&quot;timeTaken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">timeTaken</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1024, (logged): timeTaken: 0.02099609375ms</span>
</code></pre></div><h3 id="_5-createeventhub：简单的发布-订阅模式"><a href="#_5-createeventhub：简单的发布-订阅模式" aria-hidden="true" class="header-anchor">#</a> 5. createEventHub：简单的发布 / 订阅模式</h3> <p>创建一个发布 / 订阅（发布 - 订阅）事件集线，有 <code>emit</code>， <code>on</code>和 <code>off</code>方法。</p> <ol><li><p>使用  <code>Object.create(null)</code>创建一个空的  <code>hub</code>对象。</p></li> <li><p><code>emit</code>，根据  <code>event</code>参数解析处理程序数组，然后  <code>.forEach()</code>通过传入数据作为参数来运行每个处理程序。</p></li> <li><p><code>on</code>，为事件创建一个数组（若不存在则为空数组），然后  <code>.push()</code>将处理程序添加到该数组。</p></li> <li><p><code>off</code>，用  <code>.findIndex()</code>在事件数组中查找处理程序的索引，并使用  <code>.splice()</code>删除。</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">createEventHub</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  hub<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">handler</span> <span class="token operator">=&gt;</span> <span class="token function">handler</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">h</span> <span class="token operator">=&gt;</span> h <span class="token operator">===</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hub<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>用法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hub <span class="token operator">=</span> <span class="token function">createEventHub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> increment <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// 订阅，监听不同事件</span>
hub<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
hub<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Message event fired&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hub<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> increment<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 发布：发出事件以调用所有订阅给它们的处理程序，并将数据作为参数传递给它们</span>
hub<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印 'hello world' 和 'Message event fired'</span>
hub<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> hello<span class="token punctuation">:</span> <span class="token string">&quot;world&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印 对象 和 'Message event fired'</span>
hub<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// increment = 1</span>
<span class="token comment">// 停止订阅</span>
hub<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-memoize：缓存函数"><a href="#_6-memoize：缓存函数" aria-hidden="true" class="header-anchor">#</a> 6. memoize：缓存函数</h3> <p>通过实例化一个 <code>Map</code>对象来创建一个空的缓存。</p> <p>通过检查输入值的函数输出是否已缓存，返回存储一个参数的函数，该参数将被提供给已记忆的函数；如果没有，则存储并返回它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">memoize</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">cached</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">?</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">:</span> cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  cached<span class="token punctuation">.</span>cache <span class="token operator">=</span> cache<span class="token punctuation">;</span>
  <span class="token keyword">return</span> cached<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Ps: 这个版本可能不是很清晰，还有 Vue 源码版的：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Create a cached version of a pure function.
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> cached<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">:</span> Function<span class="token operator">&gt;</span><span class="token punctuation">(</span>fn<span class="token punctuation">:</span> <span class="token constant">F</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">F</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">cachedFn</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hit <span class="token operator">=</span> cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> hit <span class="token operator">||</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-once：只调用一次的函数"><a href="#_7-once：只调用一次的函数" aria-hidden="true" class="header-anchor">#</a> 7. once：只调用一次的函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">once</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> called <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>called<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-flattenobject：以键的路径扁平化对象"><a href="#_8-flattenobject：以键的路径扁平化对象" aria-hidden="true" class="header-anchor">#</a> 8. flattenObject：以键的路径扁平化对象</h3> <p>使用递归。</p> <ol><li><p>利用  <code>Object.keys(obj)</code>联合  <code>Array.prototype.reduce()</code>，以每片叶子节点转换为扁平的路径节点。</p></li> <li><p>如果键的值是一个对象，则函数使用调用适当的自身  <code>prefix</code>以创建路径  <code>Object.assign()</code>。</p></li> <li><p>否则，它将适当的前缀键值对添加到累加器对象。</p></li> <li><p><code>prefix</code>除非你希望每个键都有一个前缀，否则应始终省略第二个参数。</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> flattenObject <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prefix <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pre <span class="token operator">=</span> prefix<span class="token punctuation">.</span>length <span class="token operator">?</span> prefix <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> <span class="token function">flattenObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> pre <span class="token operator">+</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> acc<span class="token punctuation">[</span>pre <span class="token operator">+</span> k<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">flattenObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { 'a.b.c': 1, d: 1 }</span>
</code></pre></div><h3 id="_9-unflattenobject：以键的路径展开对象"><a href="#_9-unflattenobject：以键的路径展开对象" aria-hidden="true" class="header-anchor">#</a> 9. unflattenObject：以键的路径展开对象</h3> <p>与上面的相反，展开对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">unflattenObject</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
        acc<span class="token punctuation">,</span>
        <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
          <span class="token string">&quot;{&quot;</span> <span class="token operator">+</span>
            keys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> keys<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token template-string"><span class="token string">`&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;:{`</span></span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;:`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
            obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span>
            <span class="token string">&quot;}&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> acc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">unflattenObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;a.b.c&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: { b: { c: 1 } }, d: 1 }</span>
</code></pre></div><p>这个的用途，在做 <code>Tree</code>组件或复杂表单时取值非常舒服。</p> <h2 id="第三部分：字符串"><a href="#第三部分：字符串" aria-hidden="true" class="header-anchor">#</a> 第三部分：字符串</h2> <h3 id="_1-bytesize：返回字符串的字节长度"><a href="#_1-bytesize：返回字符串的字节长度" aria-hidden="true" class="header-anchor">#</a> 1. <code>byteSize</code>：返回字符串的字节长度</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">byteSize</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
<span class="token function">byteSize</span><span class="token punctuation">(</span><span class="token string">&quot;😀&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token function">byteSize</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 11</span>
</code></pre></div><h3 id="_2-capitalize：首字母大写"><a href="#_2-capitalize：首字母大写" aria-hidden="true" class="header-anchor">#</a> 2. <code>capitalize</code>：首字母大写</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">capitalize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> first<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> rest<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token string">&quot;fooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'FooBar'</span>
<span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token string">&quot;fooBar&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Foobar'</span>
</code></pre></div><h3 id="_3-capitalizeeveryword：每个单词首字母大写"><a href="#_3-capitalizeeveryword：每个单词首字母大写" aria-hidden="true" class="header-anchor">#</a> 3. <code>capitalizeEveryWord</code>：每个单词首字母大写</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">capitalizeEveryWord</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b[a-z]/g</span><span class="token punctuation">,</span> <span class="token parameter">char</span> <span class="token operator">=&gt;</span> char<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">capitalizeEveryWord</span><span class="token punctuation">(</span><span class="token string">&quot;hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Hello World!'</span>
</code></pre></div><h3 id="_4-decapitalize：首字母小写"><a href="#_4-decapitalize：首字母小写" aria-hidden="true" class="header-anchor">#</a> 4. <code>decapitalize</code>：首字母小写</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">decapitalize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> first<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> rest<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">decapitalize</span><span class="token punctuation">(</span><span class="token string">&quot;FooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'fooBar'</span>
<span class="token function">decapitalize</span><span class="token punctuation">(</span><span class="token string">&quot;FooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'fooBar'</span>
</code></pre></div><h3 id="_5-luhncheck：银行卡号码校验（-luhn算法）"><a href="#_5-luhncheck：银行卡号码校验（-luhn算法）" aria-hidden="true" class="header-anchor">#</a> 5. <code>luhnCheck</code>：银行卡号码校验（ <code>luhn</code>算法）</h3> <p><code>Luhn</code>算法的实现，用于验证各种标识号，例如信用卡号，IMEI 号，国家提供商标识号等。</p> <p>与 <code>String.prototype.split('')</code>结合使用，以获取数字数组。获得最后一个数字。实施 <code>luhn</code>算法。如果被整除，则返回，否则返回。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">luhnCheck</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> lastDigit <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">?</span> acc <span class="token operator">+</span> val <span class="token punctuation">:</span> acc <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>val <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sum <span class="token operator">+=</span> lastDigit<span class="token punctuation">;</span>
  <span class="token keyword">return</span> sum <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>用例:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">luhnCheck</span><span class="token punctuation">(</span><span class="token string">&quot;4485275742308327&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">luhnCheck</span><span class="token punctuation">(</span><span class="token number">6011329933655299</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  false</span>
<span class="token function">luhnCheck</span><span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h4 id="补充：银行卡号码的校验规则："><a href="#补充：银行卡号码的校验规则：" aria-hidden="true" class="header-anchor">#</a> 补充：<strong>银行卡号码的校验规则</strong>：</h4> <p>关于 <code>luhn</code>算法，可以参考以下文章：</p> <blockquote><p>银行卡号码校验算法（Luhn 算法，又叫模 10 算法）</p></blockquote> <p>银行卡号码的校验采用 <code>Luhn</code>算法，校验过程大致如下：</p> <ol><li><p>从右到左给卡号字符串编号，最右边第一位是 1，最右边第二位是 2，最右边第三位是 3….</p></li> <li><p>从右向左遍历，对每一位字符 t 执行第三个步骤，并将每一位的计算结果相加得到一个数 s。</p></li> <li><p>对每一位的计算规则：如果这一位是奇数位，则返回 t 本身，如果是偶数位，则先将 t 乘以 2 得到一个数 n，如果 n 是一位数（小于 10），直接返回 n，否则将 n 的个位数和十位数相加返回。</p></li> <li><p>如果 s 能够整除 10，则此号码有效，否则号码无效。</p></li></ol> <p>因为最终的结果会对 10 取余来判断是否能够整除 10，所以又叫做模 10 算法。</p> <p>当然，还是库比较香: <strong>bankcardinfo</strong></p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/zewrLkrYfsNapry9GoZwmvm1KEVZ7ibXUn6ibXo2JRFdMWfg6nlpz7H5VzyCicjgiaKc86bLzvkVGUgEKVtYfZNNuw/640?wx_fmt=png" alt></p> <h3 id="_6-splitlines：将多行字符串拆分为行数组。"><a href="#_6-splitlines：将多行字符串拆分为行数组。" aria-hidden="true" class="header-anchor">#</a> 6. <code>splitLines</code>：将多行字符串拆分为行数组。</h3> <p>使用 <code>String.prototype.split()</code>和正则表达式匹配换行符并创建一个数组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">splitLines</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\r?\n/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">splitLines</span><span class="token punctuation">(</span><span class="token string">&quot;This\nis a\nmultiline\nstring.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['This', 'is a', 'multiline', 'string.' , '']</span>
</code></pre></div><h3 id="_7-striphtmltags：删除字符串中的-html标签"><a href="#_7-striphtmltags：删除字符串中的-html标签" aria-hidden="true" class="header-anchor">#</a> 7. <code>stripHTMLTags</code>：删除字符串中的  <code>HTMl</code>标签</h3> <p>从字符串中删除 <code>HTML/XML</code>标签。</p> <p>使用正则表达式从字符串中删除 <code>HTML/XML</code> 标记。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">stripHTMLTags</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&lt;[^&gt;]*&gt;/g</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">stripHTMLTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;&lt;em&gt;lorem&lt;/em&gt; &lt;strong&gt;ipsum&lt;/strong&gt;&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'lorem ipsum'</span>
</code></pre></div><h2 id="第四部分：对象"><a href="#第四部分：对象" aria-hidden="true" class="header-anchor">#</a> 第四部分：对象</h2> <h3 id="_1-dayofyear：当前日期天数"><a href="#_1-dayofyear：当前日期天数" aria-hidden="true" class="header-anchor">#</a> 1. <code>dayOfYear</code>：当前日期天数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">dayOfYear</span> <span class="token operator">=</span> <span class="token parameter">date</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>date <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dayOfYear</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 285</span>
</code></pre></div><h3 id="_2-forown：迭代属性并执行回调"><a href="#_2-forown：迭代属性并执行回调" aria-hidden="true" class="header-anchor">#</a> 2. <code>forOwn</code>：迭代属性并执行回调</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">forOwn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">forOwn</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'bar', 1</span>
</code></pre></div><h3 id="_3-gettimefromdate：返回当前-24-小时制时间的字符串"><a href="#_3-gettimefromdate：返回当前-24-小时制时间的字符串" aria-hidden="true" class="header-anchor">#</a> 3. <code>GetTimeFromDate</code>：返回当前 24 小时制时间的字符串</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getColonTimeFromDate</span> <span class="token operator">=</span> <span class="token parameter">date</span> <span class="token operator">=&gt;</span> date<span class="token punctuation">.</span><span class="token function">toTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getColonTimeFromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;08:38:00&quot;</span>
</code></pre></div><h3 id="_4-getdaysbetweendates：返回日期间的天数"><a href="#_4-getdaysbetweendates：返回日期间的天数" aria-hidden="true" class="header-anchor">#</a> 4. <code>GetDaysBetweenDates</code>：返回日期间的天数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getDaysDiffBetweenDates</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dateInitial<span class="token punctuation">,</span> dateFinal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>dateFinal <span class="token operator">-</span> dateInitial<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getDaysDiffBetweenDates</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;2019-10-14&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 286</span>
</code></pre></div><h3 id="_5-is：检查值是否为特定类型。"><a href="#_5-is：检查值是否为特定类型。" aria-hidden="true" class="header-anchor">#</a> 5. <code>is</code>：检查值是否为特定类型。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">is</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> val<span class="token punctuation">.</span>constructor <span class="token operator">===</span> type<span class="token punctuation">;</span>
<span class="token function">is</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>ArrayBuffer<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>Map<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">,</span> <span class="token regex">/./g</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>Set<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>WeakMap<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>WeakSet<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>String<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>String<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>Number<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>Number<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">is</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_6-isafterdate：检查是否在某日期后"><a href="#_6-isafterdate：检查是否在某日期后" aria-hidden="true" class="header-anchor">#</a> 6. <code>isAfterDate</code>：检查是否在某日期后</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">isAfterDate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dateA<span class="token punctuation">,</span> dateB</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dateA <span class="token operator">&gt;</span> dateB<span class="token punctuation">;</span>
<span class="token function">isAfterDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_7-isbeforedate：检查是否在某日期前"><a href="#_7-isbeforedate：检查是否在某日期前" aria-hidden="true" class="header-anchor">#</a> 7. <code>isBeforeDate</code>：检查是否在某日期前</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">isBeforeDate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dateA<span class="token punctuation">,</span> dateB</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dateA <span class="token operator">&lt;</span> dateB<span class="token punctuation">;</span>
<span class="token function">isBeforeDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_8-tomorrow：获取明天的字符串格式时间"><a href="#_8-tomorrow：获取明天的字符串格式时间" aria-hidden="true" class="header-anchor">#</a> 8 <code>tomorrow</code>：获取明天的字符串格式时间</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">tomorrow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">tomorrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2019-10-15 (如果明天是2019-10-15)</span>
</code></pre></div><h3 id="_9-equals：全等判断"><a href="#_9-equals：全等判断" aria-hidden="true" class="header-anchor">#</a> 9. <code>equals</code>：全等判断</h3> <p>在两个变量之间进行深度比较以确定它们是否全等。</p> <p><strong>此代码段精简的核心在于 <code>Array.prototype.every()</code>的使用。</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">equals</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Date</span> <span class="token operator">&amp;&amp;</span> b <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> b<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>a <span class="token operator">||</span> <span class="token operator">!</span>b <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> b <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> a <span class="token operator">===</span> b<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>prototype <span class="token operator">!==</span> b<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span>length <span class="token operator">!==</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> keys<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> <span class="token function">equals</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>用法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">equals</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> e<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> e<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="第五部分：数字"><a href="#第五部分：数字" aria-hidden="true" class="header-anchor">#</a> 第五部分：数字</h2> <h3 id="_1-randomintegerinrange：生成指定范围的随机整数"><a href="#_1-randomintegerinrange：生成指定范围的随机整数" aria-hidden="true" class="header-anchor">#</a> 1. <code>randomIntegerInRange</code>：生成指定范围的随机整数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">randomIntegerInRange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">;</span>
<span class="token function">randomIntegerInRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><h3 id="_2-randomnumberinrange：生成指定范围的随机小数"><a href="#_2-randomnumberinrange：生成指定范围的随机小数" aria-hidden="true" class="header-anchor">#</a> 2. <code>randomNumberInRange</code>：生成指定范围的随机小数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">randomNumberInRange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">;</span>
<span class="token function">randomNumberInRange</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6.0211363285087005</span>
</code></pre></div><h3 id="_3-round：四舍五入到指定位数"><a href="#_3-round：四舍五入到指定位数" aria-hidden="true" class="header-anchor">#</a> 3. <code>round</code>：四舍五入到指定位数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">round</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> decimals <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>`$<span class="token punctuation">{</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">e</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>decimals<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>e<span class="token operator">-</span>$<span class="token punctuation">{</span>decimals<span class="token punctuation">}</span>`<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1.005</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.01</span>
</code></pre></div><h3 id="_4-sum：计算数组或多个数字的总和"><a href="#_4-sum：计算数组或多个数字的总和" aria-hidden="true" class="header-anchor">#</a> 4. <code>sum</code>：计算数组或多个数字的总和</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
</code></pre></div><h3 id="_5-tocurrency：简单的货币单位转换"><a href="#_5-tocurrency：简单的货币单位转换" aria-hidden="true" class="header-anchor">#</a> 5. <code>toCurrency</code>：简单的货币单位转换</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">toCurrency</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> curr<span class="token punctuation">,</span> LanguageFormat <span class="token operator">=</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Intl<span class="token punctuation">.</span><span class="token function">NumberFormat</span><span class="token punctuation">(</span>LanguageFormat<span class="token punctuation">,</span> <span class="token punctuation">{</span> style<span class="token punctuation">:</span> <span class="token string">&quot;currency&quot;</span><span class="token punctuation">,</span> currency<span class="token punctuation">:</span> curr <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toCurrency</span><span class="token punctuation">(</span><span class="token number">123456.789</span><span class="token punctuation">,</span> <span class="token string">&quot;EUR&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// €123,456.79</span>
<span class="token function">toCurrency</span><span class="token punctuation">(</span><span class="token number">123456.789</span><span class="token punctuation">,</span> <span class="token string">&quot;USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// $123,456.79</span>
<span class="token function">toCurrency</span><span class="token punctuation">(</span><span class="token number">123456.789</span><span class="token punctuation">,</span> <span class="token string">&quot;USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ۱۲۳٬۴۵۶٫۷۹</span>
<span class="token function">toCurrency</span><span class="token punctuation">(</span><span class="token number">322342436423.2435</span><span class="token punctuation">,</span> <span class="token string">&quot;JPY&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ¥322,342,436,423</span>
</code></pre></div><h2 id="第六部分：浏览器操作及其它"><a href="#第六部分：浏览器操作及其它" aria-hidden="true" class="header-anchor">#</a> 第六部分：浏览器操作及其它</h2> <h3 id="_1-bottomvisible：检查页面底部是否可见"><a href="#_1-bottomvisible：检查页面底部是否可见" aria-hidden="true" class="header-anchor">#</a> 1. <code>bottomVisible</code>：检查页面底部是否可见</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">bottomVisible</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">+</span> window<span class="token punctuation">.</span>scrollY <span class="token operator">&gt;=</span>
  <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bottomVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_2-createdirectory：检查创建目录"><a href="#_2-createdirectory：检查创建目录" aria-hidden="true" class="header-anchor">#</a> 2. <code>CreateDirectory</code>：检查创建目录</h3> <p>此代码段调用 <code>fs</code>模块的 <code>existsSync()</code>检查目录是否存在，如果不存在，则 <code>mkdirSync()</code>创建该目录。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">createDirIfNotExists</span> <span class="token operator">=</span> <span class="token parameter">dir</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token operator">?</span> fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">createDirIfNotExists</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-currenturl：返回当前链接-url"><a href="#_3-currenturl：返回当前链接-url" aria-hidden="true" class="header-anchor">#</a> 3. <code>currentURL</code>：返回当前链接  <code>url</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">currentURL</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
<span class="token function">currentURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'https://juejin.im'</span>
</code></pre></div><h3 id="_4-distance：返回两点间的距离"><a href="#_4-distance：返回两点间的距离" aria-hidden="true" class="header-anchor">#</a> 4. <code>distance</code>：返回两点间的距离</h3> <p>该代码段通过计算欧几里得距离来返回两点之间的距离。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">distance</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x0<span class="token punctuation">,</span> y0<span class="token punctuation">,</span> x1<span class="token punctuation">,</span> y1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span>x1 <span class="token operator">-</span> x0<span class="token punctuation">,</span> y1 <span class="token operator">-</span> y0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">distance</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.23606797749979</span>
</code></pre></div><h3 id="_5-elementcontains：检查是否包含子元素"><a href="#_5-elementcontains：检查是否包含子元素" aria-hidden="true" class="header-anchor">#</a> 5. <code>elementContains</code>：检查是否包含子元素</h3> <p>此代码段检查父元素是否包含子元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">elementContains</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> parent <span class="token operator">!==</span> child <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">elementContains</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">elementContains</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="_6-getstyle：返回指定元素的生效样式"><a href="#_6-getstyle：返回指定元素的生效样式" aria-hidden="true" class="header-anchor">#</a> 6. <code>getStyle</code>：返回指定元素的生效样式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> ruleName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">[</span>ruleName<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">getStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;font-size&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '16px'</span>
</code></pre></div><h3 id="_7-gettype：返回值或变量的类型名"><a href="#_7-gettype：返回值或变量的类型名" aria-hidden="true" class="header-anchor">#</a> 7. <code>getType</code>：返回值或变量的类型名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getType</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token string">&quot;undefined&quot;</span> <span class="token punctuation">:</span> v <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;null&quot;</span> <span class="token punctuation">:</span> v<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getType</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'set'</span>
<span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'array'</span>
</code></pre></div><h3 id="_8-hasclass：校验指定元素的类名"><a href="#_8-hasclass：校验指定元素的类名" aria-hidden="true" class="header-anchor">#</a> 8. <code>hasClass</code>：校验指定元素的类名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">hasClass</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> className</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">hasClass</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;p.special&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;special&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_9-hide：隐藏所有的指定标签"><a href="#_9-hide：隐藏所有的指定标签" aria-hidden="true" class="header-anchor">#</a> 9. <code>hide</code>：隐藏所有的指定标签</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">hide</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span>el<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">hide</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 隐藏所有&lt;img&gt;标签</span>
</code></pre></div><h3 id="_10-httpsredirect：-http-跳转-https"><a href="#_10-httpsredirect：-http-跳转-https" aria-hidden="true" class="header-anchor">#</a> 10. <code>httpsRedirect</code>： <code>HTTP</code>  跳转  <code>HTTPS</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">httpsRedirect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>location<span class="token punctuation">.</span>protocol <span class="token operator">!==</span> <span class="token string">&quot;https:&quot;</span><span class="token punctuation">)</span> location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;https://&quot;</span> <span class="token operator">+</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;//&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">httpsRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 若在`http://www.baidu.com`, 则跳转到`https://www.baidu.com`</span>
</code></pre></div><h3 id="_11-insertafter：在指定元素之后插入新元素"><a href="#_11-insertafter：在指定元素之后插入新元素" aria-hidden="true" class="header-anchor">#</a> 11. <code>insertAfter</code>：在指定元素之后插入新元素</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">insertAfter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> htmlString</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> el<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&quot;afterend&quot;</span><span class="token punctuation">,</span> htmlString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &lt;div id=&quot;myId&quot;&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;</span>
<span class="token function">insertAfter</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;p&gt;after&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_12-insertbefore：在指定元素之前插入新元素"><a href="#_12-insertbefore：在指定元素之前插入新元素" aria-hidden="true" class="header-anchor">#</a> 12. <code>insertBefore</code>：在指定元素之前插入新元素</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">insertBefore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> htmlString</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> el<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&quot;beforebegin&quot;</span><span class="token punctuation">,</span> htmlString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">insertBefore</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;p&gt;before&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p&gt;before&lt;/p&gt; &lt;div id=&quot;myId&quot;&gt;...&lt;/div&gt;</span>
</code></pre></div><h3 id="_13-isbrowser：检查是否为浏览器环境"><a href="#_13-isbrowser：检查是否为浏览器环境" aria-hidden="true" class="header-anchor">#</a> 13. <code>isBrowser</code>：检查是否为浏览器环境</h3> <p>此代码段可用于确定当前运行时环境是否为浏览器。这有助于避免在服务器（节点）上运行前端模块时出错。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">isBrowser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token keyword">typeof</span> window<span class="token punctuation">,</span> <span class="token keyword">typeof</span> document<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">isBrowser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true (browser)</span>
<span class="token function">isBrowser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false (Node)</span>
</code></pre></div><h3 id="_14-isbrowsertab：检查当前标签页是否活动"><a href="#_14-isbrowsertab：检查当前标签页是否活动" aria-hidden="true" class="header-anchor">#</a> 14. <code>isBrowserTab</code>：检查当前标签页是否活动</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">isBrowserTabFocused</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>document<span class="token punctuation">.</span>hidden<span class="token punctuation">;</span>
<span class="token function">isBrowserTabFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_15-nodelisttoarray：转换-nodelist为数组"><a href="#_15-nodelisttoarray：转换-nodelist为数组" aria-hidden="true" class="header-anchor">#</a> 15. <code>nodeListToArray</code>：转换  <code>nodeList</code>为数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">nodeListToArray</span> <span class="token operator">=</span> <span class="token parameter">nodeList</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span>nodeList<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">nodeListToArray</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ &lt;!DOCTYPE html&gt;, html ]</span>
</code></pre></div><h3 id="_16-randomhexadecimalcolorcode：随机十六进制颜色"><a href="#_16-randomhexadecimalcolorcode：随机十六进制颜色" aria-hidden="true" class="header-anchor">#</a> 16. <code>RandomHexadecimalColorCode</code>：随机十六进制颜色</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">randomHexColorCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xfffff</span> <span class="token operator">*</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;#&quot;</span> <span class="token operator">+</span> n<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">randomHexColorCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;#e34155&quot;</span>
</code></pre></div><h3 id="_17-scrolltotop：平滑滚动至顶部"><a href="#_17-scrolltotop：平滑滚动至顶部" aria-hidden="true" class="header-anchor">#</a> 17. <code>scrollToTop</code>：平滑滚动至顶部</h3> <p>该代码段可用于平滑滚动到当前页面的顶部。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">scrollToTop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>scrollToTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> c <span class="token operator">-</span> c <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">scrollToTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_18-smoothscroll：滚动到指定元素区域"><a href="#_18-smoothscroll：滚动到指定元素区域" aria-hidden="true" class="header-anchor">#</a> 18. <code>smoothScroll</code>：滚动到指定元素区域</h3> <p>该代码段可将指定元素平滑滚动到浏览器窗口的可见区域。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">smoothScroll</span> <span class="token operator">=</span> <span class="token parameter">element</span> <span class="token operator">=&gt;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    behavior<span class="token punctuation">:</span> <span class="token string">&quot;smooth&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">smoothScroll</span><span class="token punctuation">(</span><span class="token string">&quot;#fooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">smoothScroll</span><span class="token punctuation">(</span><span class="token string">&quot;.fooBar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_19-detectdevicetype：检测移动-pc-设备"><a href="#_19-detectdevicetype：检测移动-pc-设备" aria-hidden="true" class="header-anchor">#</a> 19. <code>detectDeviceType</code>：检测移动 / PC 设备</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">detectDeviceType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token regex">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Mobile&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;Desktop&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_20-getscrollposition：返回当前的滚动位置"><a href="#_20-getscrollposition：返回当前的滚动位置" aria-hidden="true" class="header-anchor">#</a> 20. <code>getScrollPosition</code>：返回当前的滚动位置</h3> <p>默认参数为 <code>window</code> ， <code>pageXOffset(pageYOffset)</code>为第一选择，没有则用 <code>scrollLeft(scrollTop)</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getScrollPosition</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el <span class="token operator">=</span> window</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> el<span class="token punctuation">.</span>pageXOffset <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> el<span class="token punctuation">.</span>pageXOffset <span class="token punctuation">:</span> el<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">,</span>
  y<span class="token punctuation">:</span> el<span class="token punctuation">.</span>pageYOffset <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> el<span class="token punctuation">.</span>pageYOffset <span class="token punctuation">:</span> el<span class="token punctuation">.</span>scrollTop
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getScrollPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {x: 0, y: 200}</span>
</code></pre></div><h3 id="_21-size：获取不同类型变量的长度"><a href="#_21-size：获取不同类型变量的长度" aria-hidden="true" class="header-anchor">#</a> 21. <code>size</code>：获取不同类型变量的长度</h3> <p>这个的实现非常巧妙，利用 <code>Blob</code>类文件对象的特性，获取对象的长度。</p> <p>另外，多重三元运算符，是真香。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">size</span> <span class="token operator">=</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span>
  Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token operator">?</span> val<span class="token punctuation">.</span>length
    <span class="token punctuation">:</span> val <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span>
    <span class="token operator">?</span> val<span class="token punctuation">.</span>size <span class="token operator">||</span> val<span class="token punctuation">.</span>length <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span>length
    <span class="token punctuation">:</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span>
    <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size
    <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
<span class="token function">size</span><span class="token punctuation">(</span><span class="token string">&quot;size&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">{</span> one<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> two<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> three<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><h3 id="_22-escapehtml：转义-html"><a href="#_22-escapehtml：转义-html" aria-hidden="true" class="header-anchor">#</a> 22. <code>escapeHTML</code>：转义  <code>HTML</code></h3> <p>当然是用来防 <code>XSS</code>攻击啦。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">escapeHTML</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
  str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
    <span class="token regex">/[&amp;&lt;&gt;'&quot;]/g</span><span class="token punctuation">,</span>
    <span class="token parameter">tag</span> <span class="token operator">=&gt;</span>
      <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'&amp;'</span><span class="token punctuation">:</span> <span class="token string">'&amp;'</span><span class="token punctuation">,</span>
        <span class="token string">'&lt;'</span><span class="token punctuation">:</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span>
        <span class="token string">'&gt;'</span><span class="token punctuation">:</span> <span class="token string">'&gt;'</span><span class="token punctuation">,</span>
        <span class="token string">&quot;'&quot;</span><span class="token punctuation">:</span> <span class="token string">''</span>'<span class="token punctuation">,</span>
        <span class="token string">'&quot;'</span><span class="token punctuation">:</span> <span class="token string">'&quot;'</span>
      <span class="token punctuation">}</span><span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">||</span> tag<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">escapeHTML</span><span class="token punctuation">(</span><span class="token string">'&lt;a href=&quot;#&quot;&gt;Me &amp; you&lt;/a&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '&lt;a href=&quot;#&quot;&gt;Me &amp; you&lt;/a&gt;'</span>

</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/bookNotes/assets/js/app.a5c1f5ee.js" defer></script><script src="/bookNotes/assets/js/91.f87deae7.js" defer></script>
  </body>
</html>
